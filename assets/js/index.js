document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("animationsPolygon"),t=document.getElementById("hamburgerSection"),i=(document.getElementById("primarySlider"),document.querySelectorAll(".section"),document.querySelector(".primary")),s=document.querySelector(".news"),l=(e,t=2,i=15)=>new Swiper(e,{direction:"vertical",loop:!0,slidesPerView:t,spaceBetween:Number(i),scrollbar:{verticalClass:"d-none"},on:{afterInit:function(){let e=500;this.slides.forEach((t,i)=>{setTimeout(()=>{t.style.opacity="1"},e),e+=200})}},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,navigation:{nextEl:e.slice(0,e.indexOf("-"))+"-next",prevEl:e.slice(0,e.indexOf("-"))+"-prev",lockClass:"d-none"}}),n=()=>{new Swiper("#mediaSlider",{slidesPerView:"auto",centeredSlides:!1,spaceBetween:0,loop:!0,centeredSlides:!1,initialSlide:0,on:{afterInit:function(){let e=500;this.slides.forEach((t,i)=>{setTimeout(()=>{t.style.opacity="1"},e),e+=200})}}})},o=e=>{new Swiper(".primary-swiper-desktop",{slidesPerView:"auto",spaceBetween:0,loop:!0,loopedSlides:4,centeredSlides:!0,initialSlide:Number(e),keyboard:{enabled:!0,onlyInViewport:!0},on:{slideChange:function(){const{activeIndex:e}=this;this.slides.forEach((t,i)=>{i===e?t.querySelector(".active-content").classList.remove("active-content__inactive"):t.querySelector(".active-content").classList.add("active-content__inactive")})}}})},r=e=>new Swiper(e,{direction:"vertical",slidesPerView:"auto",freeMode:!0,scrollbar:{el:".swiper-scrollbar"},navigation:{nextEl:".vertical-text-next",prevEl:".vertical-text-prev ",lockClass:"d-none"},mousewheel:!0}),a=e=>document.querySelector(e),c=e=>{const t=e.querySelector(`[data-position-${e.dataset.name}="outer"]`),i=e.querySelectorAll(`[data-position-${e.dataset.name}="inner"]`);switch(r("#mobileVerticalTextSlider"),l(".projects-slider"),l(".hobby-slider"),n(),e.dataset.name){case"about":e.querySelector(".slide-1").classList.add("slide-1__scrolled"),e.querySelector(".slide-3").classList.add("slide-3__scrolled");break;case"hobby":i.forEach(e=>e.style.display="none"),e.querySelector(".slide-1").classList.add("slide-1__scrolled"),e.querySelector(".section-name").classList.add("section-name__scrolled"),e.querySelector(".slide-2").classList.add("slide-2__scrolled"),e.addEventListener("animationend",(function(){t.style.display="none",i.forEach(e=>e.style.display="block")}));break;case"projects":i.forEach(e=>e.style.display="none"),e.querySelector(".slide-2").classList.add("slide-2__scrolled"),e.querySelector(".section-name").classList.add("section-name__scrolled"),e.addEventListener("animationend",(function(){t.style.display="none",i.forEach(e=>e.style.display="block")}));break;case"media":e.querySelector(".slide-1").classList.add("slide-1__scrolled"),e.querySelector(".slide-2").classList.add("slide-2__scrolled"),e.querySelector(".slide-2").addEventListener("animationend",(function(){}))}},d=e=>{const t=document.querySelector(".section-slider-desktop"),i=t.querySelector('[data-name="about"]'),s=t.querySelector('[data-name="hobby"]'),n=t.querySelector('[data-name="projects"]'),o=t.querySelector('[data-name="media"]');switch(r("#desktopVerticalTextSlider"),l(".hobbydesktop-","auto"),l(".projectsdesktop-","auto"),l(".mediadesktop-","auto"),e.style.width="95%",e.dataset.name){case"about":e.querySelector(".section-desktop__content").style.right="calc(100% - 412px)",i.style.left="2.5%",s.style.left="97.5%",n.style.right="-25%",o.style.right="-90%";break;case"hobby":e.querySelector(".section-desktop__content").style.left="0px",i.style.left="-30%",s.style.left="2.5%",n.style.right="-10%",o.style.right="-40%";break;case"projects":e.querySelector(".section-name").style.left="0",i.style.left="-50%",s.style.left="-20%",n.style.right="2.5%",o.style.right="-30%";break;case"media":i.style.left="-60%",s.style.left="-30%",n.style.right="97.5%",o.style.right="2.5%"}},y=e=>{e.preventDefault(),document.querySelector("main").classList.add("page-changing"),setTimeout(()=>window.location.href=e.target.href,700)},u=e=>{e.classList.add("active"),e.previousElementSibling.classList.add("active-divider")};let p=!1;const S=setInterval(()=>{t.querySelector(".active")&&a(".hamburger__section__finally_opened")&&(u(a(".active")),p=!0),p&&clearInterval(S)},100);e.insertAdjacentElement("afterbegin",t.cloneNode(!0)),e.querySelector("#hamburgerSection").id="";const m=e.querySelectorAll("a");if(m.forEach((e,t)=>{t!==m.length-1&&(e.style.width="auto",e.style.visibility="visible")}),document.querySelector(".desktop-links").querySelectorAll("a").forEach(e=>e.addEventListener("click",(function(e){y(e)}))),t.addEventListener("click",(function(e){t.classList.add("hamburger__section__opened"),t.addEventListener("animationend",()=>{t.classList.add("hamburger__section__finally_opened"),t.querySelectorAll("a").forEach((e,t)=>{t!==m.length-1&&(e.style.width=m[t].offsetWidth+"px",e.addEventListener("click",(function(e){y(e)})))})})})),i){const e=document.querySelector(".section-slider-desktop").querySelectorAll(".section-desktop"),t=document.getElementById("primarySwiperDesktop");e.forEach(e=>{e.addEventListener("click",(function(){o(e.dataset.order),d(e),e.addEventListener("transitionend",()=>{t.style.top="0",setTimeout(()=>t.classList.add("showed"),350)})}))});const i=document.querySelector(".inner-section-slider"),s=(new Swiper(".projects-slider",{direction:"vertical",loop:!1,slidesPerView:2,spaceBetween:15,scrollbar:{verticalClass:"d-none"},navigation:{nextEl:".projects-next",prevEl:".projects-prev",lockClass:"d-none"}}),e=>{new Swiper("#innerPrimarySlider",{slidesPerView:"auto",centeredSlides:!1,spaceBetween:0,loop:!0,loopedSlides:4,centeredSlides:!1,keyboard:{enabled:!0,onlyInViewport:!0},initialSlide:Number(e),on:{transitionEnd:function(e){console.log(e.slides[e.activeIndex].childNode)}}})});new Swiper("#primarySlider",{slidesPerView:"auto",centeredSlides:!1,spaceBetween:0,loop:!0,loopedSlides:4,initialSlide:0,on:{init:function(){this.slides.forEach((e,t)=>{e.style.zIndex=this.slides.length-t}),this.slides[this.activeIndex].style.zIndex=10},click:function(e,t){const l=t.path.find(e=>{if(e.classList)return Array.from(e.classList).includes("swiper-slide-active")});l&&(l.style.width="102%",l.style.boxShadow="none",e.disable(),l.addEventListener("transitionend",(function(){const e=l.querySelector(".section");let t;switch(e.dataset.name){case"about":t=e.querySelector(".slide-3"),t.querySelector(".inner-section-slider")||(e.querySelector(".slide-3").insertAdjacentElement("afterbegin",i.cloneNode(!0)),i.innerHTML="",s(e.dataset.inner),c(e));break;case"hobby":case"projects":case"media":t=e.querySelector(".slide-2"),t.querySelector(".inner-section-slider")||(e.querySelector(".slide-2").insertAdjacentElement("afterbegin",i.cloneNode(!0)),i.innerHTML="",s(e.dataset.inner),c(e))}})))}}})}if(a(".black-slider")&&new Swiper(".black-slider",{direction:"vertical",loop:!0,slidesPerView:2,spaceBetween:24,scrollbar:{verticalClass:"d-none"},on:{afterInit:function(){let e=600;this.slides.forEach((t,i)=>{setTimeout(()=>{t.style.opacity="1"},e),e+=200})}},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,navigation:{nextEl:".black-slider-next",prevEl:".black-slider-prev",lockClass:"d-none"},breakpoints:{996:{slidesPerView:3},1050:{slidesPerView:2}}}),s){p&&clearInterval(S);let e=200;s.querySelectorAll(".news-item").forEach(t=>{setTimeout(()=>t.style.opacity=1,e),e+=200}),new Swiper(".horizontal-desktop-slider",{direction:"vertical",slidesPerView:"auto",spaceBetween:10,loop:!1,breakpoints:{996:{slidesPerView:3,direction:"horizontal",spaceBetween:36}},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",lockClass:"d-none"}})}a(".single-page")&&l(".single-slider","auto",30)}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiaGFtYnVyZ2VyTWVudSIsImdldEVsZW1lbnRCeUlkIiwicHJpbWFyeVNsaWRlclNlY3Rpb24iLCJwcmltYXJ5U2VjdGlvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJpbWFyeSIsInF1ZXJ5U2VsZWN0b3IiLCJpbml0VmVydGljYWxTbGlkZXIiLCJzbGlkZXNQZXJWaWV3IiwiJGVsIiwic3BhY2VCZXR3ZWVuIiwiU3dpcGVyIiwic2Nyb2xsYmFyIiwidmVydGljYWxDbGFzcyIsIk51bWJlciIsIm9uIiwiZGVsYXkiLCJzbGlkZXMiLCJmb3JFYWNoIiwic2V0VGltZW91dCIsInN0eWxlIiwib3BhY2l0eSIsInNsaWRlIiwibiIsIm9ubHlJblZpZXdwb3J0IiwiZW5hYmxlZCIsIm5hdmlnYXRpb24iLCJwcmV2RWwiLCJzbGljZSIsImxvY2tDbGFzcyIsImluZGV4T2YiLCJjZW50ZXJlZFNsaWRlcyIsImluaXRpYWxTbGlkZSIsImFmdGVySW5pdCIsImluaXRpYWxTbGlkZVBvc2lpdG9uIiwibG9vcGVkU2xpZGVzIiwia2V5Ym9hcmQiLCJhY3RpdmVJbmRleCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsImZyZWVNb2RlIiwiZGlyZWN0aW9uIiwiZWwiLCJuZXh0RWwiLCJzZWxlY3RvciIsImluaXRWZXJ0aWNhbFRleHRTbGlkZXIiLCJzZWN0aW9uIiwiaW5pdE1lZGlhU2xpZGVyIiwiZGF0YXNldCIsIm5hbWUiLCJpbm5lck5hbWUiLCJkaXNwbGF5IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm91dGVyTmFtZSIsImRlc2t0b3BQcmltYXJ5V3JhcHBlciIsImhvYmJ5IiwicHJvamVjdHMiLCJyaWdodCIsImxlZnQiLCJtZWRpYSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsInRhcmdldCIsImxpbmsiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwibWVudUludGVydmFsIiwiY2hlY2tJc0FjdGl2ZUxpbmsiLCJ1dGlscyIsImlzTWFya2VkIiwiY2xlYXJJbnRlcnZhbCIsImFuaW1hdGlvbnNQb2x5Z29uIiwiY2xvbmVOb2RlIiwiaGVhZGVyTGlua3NDb3B5IiwiYSIsImxlbmd0aCIsIndpZHRoIiwidmlzaWJpbGl0eSIsImkiLCJjaGFuZ2VQYWdlIiwib2Zmc2V0V2lkdGgiLCJkZXNrdG9wUHJpbWFyeUlubmVyU2xpZGVyIiwiaW5pdERlc2t0b3BJbm5lclNsaWRlciIsImV4cGFuZFByaW1hcnlTZWN0aW9uT25EZXNrdG9wIiwidG9wIiwiJGlubmVyU2xpZGVyRWwiLCJsb29wIiwiaW5pdElubmVyU2xpZGVyIiwidHJhbnNpdGlvbkVuZCIsImNvbnNvbGUiLCJzd2lwZXIiLCJwcmltYXJ5U2xpZGVyIiwibG9nIiwiY2hpbGROb2RlIiwiY2xpY2siLCJ0aGlzIiwiQXJyYXkiLCJpbmNsdWRlcyIsInpJbmRleCIsImJveFNoYWRvdyIsInBhdGgiLCJmaW5kIiwiZGlzYWJsZSIsImZyb20iLCJ3cmFwcGVyIiwiaW5uZXJIVE1MIiwiZXhwYW5kUHJpbWFyeVNlY3Rpb24iLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJpbm5lciIsIm1vdXNld2hlZWwiLCJicmVha3BvaW50cyIsIjk5NiIsIjEwNTAiLCJpdGVtIl0sIm1hcHBpbmdzIjoiQUFRSUEsU0FBTUMsaUJBQWdCRCxvQkFBU0UsV0FDL0IsTUFBTUMsRUFBb0JILFNBQVdFLGVBQVIscUJBQ3ZCRSxFQUFrQkosU0FBU0ssZUFBQUEsb0JBQzNCQyxHQUFtQkMsU0FBY0wsZUFBdkMsaUJBQ3NCSyxTQUFURixpQkFBYixZQURnQkwsU0FBU08sY0FBYyxhQUdqQ0MsRUFBQUEsU0FBa0JELGNBQVNFLFNBRXpCRCxFQUFBLENBQUFFLEVBQUFELEVBQUEsRUFBQUUsRUFBQSxLQUNTLElBQUVDLE9BQUFGLEVBRlEsQ0FJbkJELFVBQWVBLFdBQ2ZFLE1BQVksRUFDWkUsY0FBV0osRUFDUEssYUFBZUMsT0FBQUosR0FQQUUsVUFBQSxDQVNmQyxjQUFBLFVBRUlFLEdBQUlDLENBQ0NDLFVBQU9DLFdBQ1JDLElBQVdILEVBQU0sSUFDUEksS0FBTkgsT0FBWUksUUFBWixDQUFBQyxFQUFBQyxLQURKSixXQUFBLEtBR0FHLEVBQUFGLE1BQUFDLFFBQUEsS0FKSkwsR0FNSEEsR0FBQSxRQUlEUSxTQUFjLENBdEJDQyxTQUFBLEVBd0JURCxnQkF4QlMsR0EwQm5CRSxZQUFZLEVBRVJDLFdBQWVDLENBQ2ZDLE9BQVdwQixFQUFBbUIsTUFBQSxFQUFBbkIsRUFBQXFCLFFBQUEsTUFBQSxRQUhISCxPQUFBbEIsRUFBQW1CLE1BQUEsRUFBQW5CLEVBQUFxQixRQUFBLE1BQUEsUUExQmhCRCxVQUFBLFlBb0NJckIsRUFEdUIsS0FFdkJ1QixJQUFBQSxPQUFBQSxlQUZ1QixDQUd2QnJCLGNBSHVCLE9BSWpCcUIsZ0JBSmlCLEVBS3ZCQSxhQUFnQixFQUNoQkMsTUFBWSxFQUNSRCxnQkFBQSxFQUNBRSxhQUFXLEVBQ1BsQixHQUFJQyxDQUNDQyxVQUFPQyxXQUNSQyxJQUFXSCxFQUFNLElBQ1BJLEtBQU5ILE9BQVlJLFFBQVosQ0FBQUMsRUFBQUMsS0FESkosV0FBQSxLQUdBRyxFQUFBRixNQUFBQyxRQUFBLEtBSkpMLEdBTUhBLEdBQUEsV0FPTFIsRUFEa0MwQixJQUVsQ3hCLElBQUFBLE9BQVksMEJBRnNCLENBRzVCRixjQUg0QixPQUlsQzJCLGFBSmtDLEVBS2xDSixNQUFBQSxFQUNBQyxhQUFvQixFQUNwQkksZ0JBQVUsRUFDTlgsYUFETVgsT0FBQW9CLEdBRU5WLFNBQWMsQ0FUZ0JDLFNBQUEsRUFXOUJELGdCQUFBLEdBRUlULEdBQU0sQ0FDRnNCLFlBQUFBLFdBREosTUFBQUEsWUFHWW5CLEdBQ0VtQixLQUNBL0IsS0FBQUEsT0FBQUEsUUFBYyxDQUFBZ0IsRUFBQUMsS0FFakJBLElBQUFjLEVBQ0cvQixFQUFjQSxjQUFBLG1CQUFpQ2dDLFVBQUFDLE9BQUEsNEJBR2hFakIsRUFBQWhCLGNBQUEsbUJBQUFnQyxVQUFBRSxJQUFBLG1DQVNMQyxFQUhZaEMsR0FJWkcsSUFBQUEsT0FBV0gsRUFBQSxDQUNIaUMsVUFBQSxXQUxJbEMsY0FBQSxPQU9aa0IsVUFBWSxFQUNGZCxVQUFHLENBQ0ErQixHQUFBLHFCQVREakIsV0FBQSxDQVlBa0IsT0FBQSxzQkFicEJqQixPQUFBLHVCQVdZRSxVQUFXLFVBT2JnQixZQUFhOUMsSUFJZitDLEVBQ0F2QyxHQUFtQlIsU0FBQU8sY0FBbkJ1QyxHQURBQyxFQUVtQkMsSUFDbkJDLE1BQUFBLEVBQWVELEVBQUF6QyxjQUFBLGtCQUFBeUMsRUFBQUUsUUFBQUMsaUJBSlRDLEVBQVlKLEVBQVEzQyxpQkFBa0Isa0JBQWlCMkMsRUFBUUUsUUFBUUMsaUJBU3JFLE9BSlJKLEVBQUEsNkJBQ0l2QyxFQUFBLG9CQUNJd0MsRUFBQSxpQkFDQUEsSUFDQUEsRUFBQUUsUUFBQUMsTUFISixJQUFLLFFBSUxILEVBQUF6QyxjQUFBLFlBQUFnQyxVQUFBRSxJQUFBLHFCQUNjdEIsRUFBUWdDLGNBQWE5QixZQUFMa0IsVUFBMUJFLElBQUEscUJBQ1FsQyxNQUNSeUMsSUFBUXpDLFFBQ0FBLEVBQUFBLFFBQWM0QyxHQUFZWixFQUFBQSxNQUFsQ2MsUUFBZ0QsUUFDeENDLEVBQUFBLGNBQWlCLFlBQWdCZixVQUFZRSxJQUFBLHFCQUNqRGMsRUFBZ0JGLGNBQVUsaUJBQTFCZCxVQUFBRSxJQUFBLDBCQUNBVyxFQUFVakMsY0FBb0IsWUFBT2tDLFVBQVVaLElBQS9DLHFCQUZKTyxFQUFBTSxpQkFBQSxnQkFBQSxXQUlBQyxFQUFBbEMsTUFBQWdDLFFBQUEsT0FGSUQsRUFBVWpDLFFBQVFnQyxHQUFRQSxFQUFLOUIsTUFBTWdDLFFBQVUsWUFJekNsQyxNQUNWNkIsSUFBUXpDLFdBQ0FBLEVBQUFBLFFBQWM0QyxHQUFBQSxFQUFpQlosTUFBQUEsUUFBYyxRQUM3Q2UsRUFBQUEsY0FBaUIsWUFBZ0JmLFVBQVlFLElBQUEscUJBQ2pEYyxFQUFnQkYsY0FBVSxpQkFBMUJkLFVBQUFFLElBQUEsMEJBQ0FXLEVBQVVqQyxpQkFBcUJFLGdCQUFnQixXQUZuRGtDLEVBQUFsQyxNQUFBZ0MsUUFBQSxPQUlBRCxFQUFBakMsUUFBQWdDLEdBQUFBLEVBQUE5QixNQUFBZ0MsUUFBQSxZQUNKLE1BQ0lMLElBQVF6QyxRQUNBQSxFQUFBQSxjQUFSLFlBQTRDa0MsVUFBSUEsSUFBQSxxQkFDeENsQyxFQUFBQSxjQUFSLFlBQWtDK0MsVUFBaUJiLElBQUEscUJBRW5ETyxFQUFBekMsY0FBQSxZQUFBK0MsaUJBQUEsZ0JBQUEsaUJBakNSUCxFQXNDY1MsSUFDUkMsTUFBS0QsRUFBeUJqRCxTQUFBQSxjQUFjLDJCQUM1Q21ELEVBQVdGLEVBQXNCakQsY0FBYyx1QkFDMUNrRCxFQUFHRCxFQUFzQmpELGNBQWMsdUJBQ2xEd0MsRUFBdUJTLEVBQUFqRCxjQUF2QiwwQkFDQUMsRUFBbUJnRCxFQUFrQmpELGNBQXJDLHVCQU9ReUMsT0FOUnhDLEVBQW1CLDhCQUNuQkEsRUFBbUIsaUJBQUQsUUFDbEJ3QyxFQUFzQixvQkFBdEIsUUFEQXhDLEVBQW1CLGlCQUFrQixRQUdyQ3dDLEVBQVFBLE1BQVFFLE1BQWhCLE1BRWdCM0MsRUFBQUEsUUFBYzRDLE1BQ2hCOUIsSUFBTixRQUNNQSxFQUFOZCxjQUFBLDZCQUFBYyxNQUFBc0MsTUFBQSxxQkFDU3RDLEVBQU1zQyxNQUFmQyxLQUFBLE9BQ012QyxFQUFNc0MsTUFBUUMsS0FBcEIsUUFDQUYsRUFBQXJDLE1BQUFzQyxNQUFBLE9BREFFLEVBQU14QyxNQUFNc0MsTUFBUSxPQUV4QixNQUNJWCxJQUFRekMsUUFDRmMsRUFBTmQsY0FBQSw2QkFBQWMsTUFBQXVDLEtBQUEsTUFDTXZDLEVBQU5BLE1BQW1CdUMsS0FBbkIsT0FDU3ZDLEVBQU1zQyxNQUFmQyxLQUFBLE9BQ012QyxFQUFOQSxNQUFvQnNDLE1BQXBCLE9BQ0FFLEVBQUF4QyxNQUFBc0MsTUFBQSxPQUFBLE1BQ0MsSUFBQSxXQUNPcEQsRUFBQUEsY0FBYyxpQkFBdEJjLE1BQUF1QyxLQUFBLElBQ012QyxFQUFOQSxNQUFtQnVDLEtBQW5CLE9BQ012QyxFQUFOQSxNQUFtQnVDLEtBQW5CLE9BQ1N2QyxFQUFNc0MsTUFBUUEsTUFBdkIsT0FDTXRDLEVBQU1zQyxNQUFRQSxNQUFwQixPQUVBLE1BQ0MsSUFBTCxRQUNVdEMsRUFBTkEsTUFBbUJ1QyxLQUFuQixPQUNNdkMsRUFBTkEsTUFBbUJ1QyxLQUFuQixPQUNTdkMsRUFBTXNDLE1BQVFBLE1BQXZCLFFBQ010QyxFQUFNc0MsTUFBUUEsTUFBcEIsU0EzRVJaLEVBK0VlZSxJQUNiQyxFQUFBQSxpQkFDRi9ELFNBQVNPLGNBQVQsUUFBK0JnQyxVQUFjRSxJQUFBLGlCQUM3Q3JCLFdBQWlCNEMsSUFBTUEsT0FBQ0MsU0FBUEMsS0FBeUJDLEVBQUZBLE9BQWVELEtBQXZELE1BbEZBbkIsRUFvRmVxQixJQUNWN0IsRUFBQUEsVUFBY0UsSUFBQSxVQUNkNEIsRUFBQUEsdUJBQXVCOUIsVUFBY0UsSUFBQSxtQkFLbEQsSUFBTTZCLEdBQUFBLEVBQ0YsTUFBSXJFLEVBQWNNLFlBQWMsS0FDdEJnRSxFQUFBQSxjQUE0QixZQUFsQ0MsRUFBQSx5Q0FDQUMsRUFBQUQsRUFBQSxZQUNIQyxHQUFBLEdBQ0RBLEdBQVlDLGNBQWNKLElBQzNCLEtBSUhLLEVBQWtCcEUsc0JBQWMsYUFBaENOLEVBQUEyRSxXQUFBLElBQ0FELEVBQU1FLGNBQWtCRixxQkFBa0J0RSxHQUFpQixHQUMzRHdFLE1BQUFBLEVBQXdCRixFQUFVdEUsaUJBQUEsS0E4QjlCLEdBN0JBd0UsRUFBVUEsUUFBQUEsQ0FBZUMsRUFBQ0MsS0FDcEIxRCxJQUFNMkQsRUFBUkQsT0FBQSxJQUNFMUQsRUFBTTRELE1BQUFBLE1BQWEsT0FDeEJILEVBQUF6RCxNQUFBNEQsV0FBQSxhQUdMakYsU0FBQU8sY0FBQSxrQkFBQUYsaUJBQUEsS0FBQWMsUUFBQTJELEdBQUFBLEVBQUF4QixpQkFBQSxTQUFBLFNBQUFRLEdBSUE3RCxFQUFjcUQsT0FHTnJELEVBQUFBLGlCQUE0QixTQUFBLFNBQUE2RCxHQUM1QjdELEVBQWNJLFVBQUFBLElBQWQsOEJBQ0lKLEVBQVU0RSxpQkFBZ0JFLGVBQVksS0FDaEMxRCxFQUFjd0QsVUFBQUEsSUFBQUEsc0NBQ2R2QixFQUFBQSxpQkFBMEIsS0FBVVEsUUFBRyxDQUFBZ0IsRUFBQUksS0FDL0JDLElBQUFBLEVBQU5KLE9BQUEsSUFESkQsRUFBQXpELE1BQUEyRCxNQUFBSCxFQUFBSyxHQUFBRSxZQUFBLEtBR0hOLEVBQUF4QixpQkFBQSxTQUFBLFNBQUFRLEdBTkxVLEVBQUFWLGNBZUp4RCxFQUFNK0UsQ0FFRnJDLE1BQ0lzQyxFQURKdEYsU0FBa0NPLGNBQVksMkJBQzFDRixpQkFBQSxvQkFDTWtGLEVBQUFBLFNBQU5yRixlQUFBLHdCQUNBOEMsRUFBUU0sUUFBaUJOLElBQ3JCcUMsRUFBQUEsaUJBQTBCaEUsU0FBMUIsV0FDQUQsRUFBaUJpRSxFQUFBQSxRQUEwQjlDLE9BRi9DaUMsRUFBQXhCLEdBSEpBLEVBQUFNLGlCQUFBLGdCQUFBLEtBREorQixFQUFBaEUsTUFBQW1FLElBQUEsSUFXTUMsV0FBaUJ6RixJQUFTTyxFQUFjZ0MsVUFBdkJFLElBQXZCLFVBQUEsWUFNSWhDLE1BQUFBLEVBSmtEVCxTQUFBTyxjQUFBLHlCQXlCOUN5QixHQW5CTyxJQUFBcEIsT0FBQSxtQkFBQSxDQU51QytCLFVBQUEsV0FVbEQrQyxNQUFBLEVBQ0EvRCxjQUFZLEVBQ1JrQixhQUFRLEdBQ1JqQixVQUFRLENBQ1JFLGNBQVcsVUFJYjZELFdBQUFBLENBQ0Y5QyxPQUFXLGlCQUNQcEMsT0FBZSxpQkFDZnVCLFVBQWdCLFlBRmNHLElBTzlCRSxJQUFRekIsT0FBRSxzQkFBQSxDQUNOYyxjQURNLE9BRU5ELGdCQUFnQixFQVRVZCxhQUFBLEVBVzlCc0IsTUFBY2xCLEVBQ1ZxQixhQUFBLEVBQ0F3RCxnQkFBZSxFQUNYQyxTQUFZQyxDQUVmcEUsU0FBQSxFQUpERCxnQkFBQSxHQWJaUSxhQUFBbEIsT0FBQW9CLEdBYVFuQixHQUFJLENBU04rRSxjQUFvQm5GLFNBQU9rRixHQUNkRCxRQURnQ0csSUFBQUYsRUFBQTVFLE9BQUE0RSxFQUFBeEQsYUFBQTJELGlCQVEvQyxJQUFBckYsT0FBQSxpQkFBQSxDQUNBSCxjQUFBLE9BQ0F3QixnQkFWK0MsRUFXM0N0QixhQUFBLEVBQ0krRSxNQUFFLEVBQ0Z0RCxhQUFZakIsRUFLaEIrRSxhQUFpQkosRUFDYjlFLEdBQU1PLENBQ0VxQixLQUFHTCxXQUNINEQsS0FBT0MsT0FBV3hELFFBQUdMLENBQUFBLEVBQVc4RCxLQUNuQzlFLEVBQUFGLE1BQUFpRixPQUFBSCxLQUFBakYsT0FBQTZELE9BQUF2RCxJQU5MMkUsS0FBS2pGLE9BQU9pRixLQUFLN0QsYUFBYWpCLE1BQU1pRixPQUFTLElBU3pDL0UsTUFBQSxTQUFvQnVFLEVBQXBCaEMsR0FDTXpDLE1BQU1rRixFQUFaekMsRUFBd0IwQyxLQUFBQyxLQUF4QjdELElBQ084RCxHQUFQOUQsRUFBQUwsVUFDTWUsT0FBaUI4QyxNQUFBTyxLQUFBL0QsRUFBQUwsV0FBaUI4RCxTQUFZLHlCQUpwRDlFLElBT1l5QixFQUFRRSxNQUFBQSxNQUFoQixPQUNTM0IsRUFBTEYsTUFBQWtGLFVBQUEsT0FDSUssRUFBVTVELFVBTHRCekIsRUFBTStCLGlCQUFpQixpQkFBaUIsV0FNdkJzRCxNQUFRckcsRUFBUmdCLEVBQXNCaEIsY0FBQSxZQUNmQSxJQUFBQSxFQUdSa0YsT0FBZW9CLEVBQWYzRCxRQUFBQyxNQUNBd0MsSUFBZ0IzQyxRQUNWOEQsRUFBTjlELEVBQUF6QyxjQUFBLFlBQ0hxRyxFQUFBckcsY0FBQSwyQkFOR3lDLEVBQVF6QyxjQUFjLFlBQVl3RyxzQkFPdEMsYUFBQXRCLEVBQUFiLFdBQUEsSUFDSmEsRUFBQW9CLFVBQUEsR0FDQWxCLEVBQUEzQyxFQUFBRSxRQUFBOEQsT0FDQXhDLEVBQUF4QixJQUhJLE1BS2F6QyxJQUFBQSxRQUNEQSxJQUFBQSxXQUdSa0YsSUFBZW9CLFFBQ0M3RCxFQUFRRSxFQUFROEQsY0FBaEMsWUFDTUYsRUFBcUI5RCxjQUEzQiwyQkFDSEEsRUFBQXpDLGNBQUEsWUFBQXdHLHNCQUxPLGFBQWN0QixFQUFlYixXQUFVLElBbEJ2RGEsRUFBQW9CLFVBQUEsR0FISmxCLEVBQUEzQyxFQUFBRSxRQUFBOEQsT0E4Qkh4QyxFQUFBeEIsYUFvRWIsR0EzQ0luQyxFQUFXLGtCQUNQQyxJQUFBQSxPQUFBQSxnQkFBZSxDQUVmNkIsVUFBQSxXQUNBVCxNQUFTLEVBQ0x6QixjQUFBLEVBQ0FFLGFBQVlRLEdBQ1JDLFVBQVcsQ0FDUEcsY0FBWUQsVUFFaEJMLEdBQUFBLENBSkppQixVQUFBLFdBTUgsSUFBQWpCLEVBQUEsSUFsQm1Ca0YsS0FBQWpGLE9BQUFDLFFBQUEsQ0FBQUksRUFBQUMsS0FvQmRKLFdBQUEsS0FBQUcsRUFBQUYsTUFBQUMsUUFBQSxLQUVVTCxHQXRCSUEsR0FBQSxRQTJCcEJXLFNBQVMsQ0FDVEUsU0FBVyxFQTVCU0wsZ0JBQUEsR0ErQnBCd0YsWUFBSyxFQUNEeEcsV0FBYSxDQUZSb0MsT0FBQSxxQkFJSGpCLE9BQUEscUJBQ0ZuQixVQUFlLFVBTFZ5RyxZQUFBLENBOUJqQkMsSUFBQSxDQXVDSDFHLGNBQUEsR0FFUzJHLEtBQUEsQ0FDTTFDLGNBQWNKLE1BT3RCMUQsRUFBSixDQUNJK0IsR0FBVytCLGNBRDBCSixHQUVyQzdELElBQUFBLEVBQWEsSUFDYkUsRUFBQUEsaUJBSHFDLGNBQUFRLFFBQUFrRyxJQUkvQmpHLFdBSitCLElBQUFpRyxFQUFBaEcsTUFBQUMsUUFBQSxFQUFBTCxHQUtyQ2lHLEdBQWEsTUFHTHZFLElBQUFBLE9BQVMsNkJBRlIsQ0FHRGhDLFVBQVksV0FIWEYsY0FBQSxPQU40QkUsYUFBQSxHQVlyQzBCLE1BQVUsRUFDTlgsWUFETSxDQUVORCxJQUFBQSxDQWRpQ2hCLGNBQUEsRUFnQnpCa0MsVUFoQnlCLGFBaUJ6QmhDLGFBQUEsS0FHUm1CLFNBQVcsQ0FISEosU0FBQSxFQWpCaEJELGdCQUFBLEdBZ0JJd0YsWUFBWSxFQVNWdkcsV0FBSSxDQUVWRixPQUFtQixzQkFDdEJvQixPQUFBLHNCQTFjTEUsVUFBQSxZQXVjUTBDLEVBQVUsaUJBRVZoRSxFQUFtQixpQkFBa0IsT0FBUSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vYWJvdXQgLTY2LjI1dndcclxuLy9ob2JieSAtOTMuNzV2d1xyXG4vL3Byb2plY3RzIC0xMTEuMjV2d1xyXG4vL21lZGlhIC0xMzMuNzV2d1xyXG5cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBhbmltYXRpb25zUG9seWdvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbmltYXRpb25zUG9seWdvbicpXHJcbiAgICBjb25zdCBoYW1idXJnZXJNZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hhbWJ1cmdlclNlY3Rpb24nKVxyXG4gICAgY29uc3QgcHJpbWFyeVNsaWRlclNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbWFyeVNsaWRlcicpXHJcbiAgICBjb25zdCBwcmltYXJ5U2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbicpXHJcbiAgICBjb25zdCBwcmltYXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByaW1hcnknKVxyXG4gICAgY29uc3QgbmV3cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdzJylcclxuXHJcbiAgICBjb25zdCBpbml0VmVydGljYWxTbGlkZXIgPSAoJGVsLCBzbGlkZXNQZXJWaWV3ID0gMiwgc3BhY2VCZXR3ZWVuID0gMTUpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFN3aXBlcigkZWwsIHtcclxuICAgICAgICAgICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXHJcbiAgICAgICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IHNsaWRlc1BlclZpZXcsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogTnVtYmVyKHNwYWNlQmV0d2VlbiksXHJcbiAgICAgICAgICAgIHNjcm9sbGJhcjoge1xyXG4gICAgICAgICAgICAgICAgdmVydGljYWxDbGFzczogJ2Qtbm9uZSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb246IHtcclxuICAgICAgICAgICAgICAgIGFmdGVySW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkZWxheSA9IDUwMFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVzLmZvckVhY2goKHNsaWRlLCBuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuc3R5bGUub3BhY2l0eSA9ICcxJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBkZWxheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXkgKz0gMjAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAga2V5Ym9hcmQ6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBvbmx5SW5WaWV3cG9ydDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW91c2V3aGVlbDogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gTmF2aWdhdGlvbiBhcnJvd3NcclxuICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgbmV4dEVsOiBgJHskZWwuc2xpY2UoMCwgJGVsLmluZGV4T2YoJy0nKSl9LW5leHRgLFxyXG4gICAgICAgICAgICAgICAgcHJldkVsOiBgJHskZWwuc2xpY2UoMCwgJGVsLmluZGV4T2YoJy0nKSl9LXByZXZgLFxyXG4gICAgICAgICAgICAgICAgbG9ja0NsYXNzOiAnZC1ub25lJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGluaXRNZWRpYVNsaWRlciA9ICgpID0+IHtcclxuICAgICAgICBuZXcgU3dpcGVyKCcjbWVkaWFTbGlkZXInLCB7XHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IFwiYXV0b1wiLFxyXG4gICAgICAgICAgICBjZW50ZXJlZFNsaWRlczogZmFsc2UsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgY2VudGVyZWRTbGlkZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICBpbml0aWFsU2xpZGU6IDAsXHJcbiAgICAgICAgICAgIG9uOiB7XHJcbiAgICAgICAgICAgICAgICBhZnRlckluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGVsYXkgPSA1MDBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlcy5mb3JFYWNoKChzbGlkZSwgbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLnN0eWxlLm9wYWNpdHkgPSAnMSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZGVsYXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5ICs9IDIwMFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpbml0RGVza3RvcElubmVyU2xpZGVyID0gKGluaXRpYWxTbGlkZVBvc2lpdG9uKSA9PiB7XHJcbiAgICAgICAgbmV3IFN3aXBlcignLnByaW1hcnktc3dpcGVyLWRlc2t0b3AnLCB7XHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IFwiYXV0b1wiLFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDAsXHJcbiAgICAgICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgICAgIGxvb3BlZFNsaWRlczogNCxcclxuICAgICAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgICAgICAgICAgIGluaXRpYWxTbGlkZTogTnVtYmVyKGluaXRpYWxTbGlkZVBvc2lpdG9uKSxcclxuICAgICAgICAgICAga2V5Ym9hcmQ6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBvbmx5SW5WaWV3cG9ydDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb246IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlQ2hhbmdlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVJbmRleFxyXG4gICAgICAgICAgICAgICAgICAgIH0gPSB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXMuZm9yRWFjaCgoc2xpZGUsIG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPT09IGFjdGl2ZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlLWNvbnRlbnQnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtY29udGVudF9faW5hY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2xpZGUucXVlcnlTZWxlY3RvcignLmluYWN0aXZlLWNvbnRlbnQnKS5zdHlsZS5vcGFjaXR5ID0gJzAnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlLWNvbnRlbnQnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtY29udGVudF9faW5hY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpbml0VmVydGljYWxUZXh0U2xpZGVyID0gKCRlbCkgPT4gKFxyXG4gICAgICAgIG5ldyBTd2lwZXIoJGVsLCB7XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbjogXCJ2ZXJ0aWNhbFwiLFxyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiBcImF1dG9cIixcclxuICAgICAgICAgICAgZnJlZU1vZGU6IHRydWUsXHJcbiAgICAgICAgICAgIHNjcm9sbGJhcjoge1xyXG4gICAgICAgICAgICAgICAgZWw6IFwiLnN3aXBlci1zY3JvbGxiYXJcIixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgbmV4dEVsOiBgLnZlcnRpY2FsLXRleHQtbmV4dGAsXHJcbiAgICAgICAgICAgICAgICBwcmV2RWw6IGAudmVydGljYWwtdGV4dC1wcmV2IGAsXHJcbiAgICAgICAgICAgICAgICBsb2NrQ2xhc3M6ICdkLW5vbmUnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1vdXNld2hlZWw6IHRydWUsXHJcbiAgICAgICAgfSlcclxuICAgIClcclxuXHJcbiAgICBjb25zdCB1dGlscyA9IHtcclxuICAgICAgICAkZWw6IChzZWxlY3RvcikgPT4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvciksXHJcbiAgICAgICAgZXhwYW5kUHJpbWFyeVNlY3Rpb246IChzZWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dGVyTmFtZSA9IHNlY3Rpb24ucXVlcnlTZWxlY3RvcihgW2RhdGEtcG9zaXRpb24tJHtzZWN0aW9uLmRhdGFzZXQubmFtZX09XCJvdXRlclwiXWApXHJcbiAgICAgICAgICAgIGNvbnN0IGlubmVyTmFtZSA9IHNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtcG9zaXRpb24tJHtzZWN0aW9uLmRhdGFzZXQubmFtZX09XCJpbm5lclwiXWApXHJcbiAgICAgICAgICAgIGluaXRWZXJ0aWNhbFRleHRTbGlkZXIoJyNtb2JpbGVWZXJ0aWNhbFRleHRTbGlkZXInKVxyXG4gICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5wcm9qZWN0cy1zbGlkZXInKVxyXG4gICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5ob2JieS1zbGlkZXInKVxyXG4gICAgICAgICAgICBpbml0TWVkaWFTbGlkZXIoKVxyXG4gICAgICAgICAgICBzd2l0Y2ggKHNlY3Rpb24uZGF0YXNldC5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdhYm91dCc6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMScpLmNsYXNzTGlzdC5hZGQoJ3NsaWRlLTFfX3Njcm9sbGVkJylcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZS0zJykuY2xhc3NMaXN0LmFkZCgnc2xpZGUtM19fc2Nyb2xsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnaG9iYnknOlxyXG4gICAgICAgICAgICAgICAgICAgIGlubmVyTmFtZS5mb3JFYWNoKG5hbWUgPT4gbmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTEnKS5jbGFzc0xpc3QuYWRkKCdzbGlkZS0xX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1uYW1lJykuY2xhc3NMaXN0LmFkZCgnc2VjdGlvbi1uYW1lX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMicpLmNsYXNzTGlzdC5hZGQoJ3NsaWRlLTJfX3Njcm9sbGVkJylcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0ZXJOYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJOYW1lLmZvckVhY2gobmFtZSA9PiBuYW1lLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdwcm9qZWN0cyc6XHJcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJOYW1lLmZvckVhY2gobmFtZSA9PiBuYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMicpLmNsYXNzTGlzdC5hZGQoJ3NsaWRlLTJfX3Njcm9sbGVkJylcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLW5hbWUnKS5jbGFzc0xpc3QuYWRkKCdzZWN0aW9uLW5hbWVfX3Njcm9sbGVkJylcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0ZXJOYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJOYW1lLmZvckVhY2gobmFtZSA9PiBuYW1lLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdtZWRpYSc6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMScpLmNsYXNzTGlzdC5hZGQoJ3NsaWRlLTFfX3Njcm9sbGVkJylcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZS0yJykuY2xhc3NMaXN0LmFkZCgnc2xpZGUtMl9fc2Nyb2xsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTInKS5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXhwYW5kUHJpbWFyeVNlY3Rpb25PbkRlc2t0b3A6IChzZWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlc2t0b3BQcmltYXJ5V3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLXNsaWRlci1kZXNrdG9wJylcclxuICAgICAgICAgICAgY29uc3QgYWJvdXQgPSBkZXNrdG9wUHJpbWFyeVdyYXBwZXIucXVlcnlTZWxlY3RvcignW2RhdGEtbmFtZT1cImFib3V0XCJdJylcclxuICAgICAgICAgICAgY29uc3QgaG9iYnkgPSBkZXNrdG9wUHJpbWFyeVdyYXBwZXIucXVlcnlTZWxlY3RvcignW2RhdGEtbmFtZT1cImhvYmJ5XCJdJylcclxuICAgICAgICAgICAgY29uc3QgcHJvamVjdHMgPSBkZXNrdG9wUHJpbWFyeVdyYXBwZXIucXVlcnlTZWxlY3RvcignW2RhdGEtbmFtZT1cInByb2plY3RzXCJdJylcclxuICAgICAgICAgICAgY29uc3QgbWVkaWEgPSBkZXNrdG9wUHJpbWFyeVdyYXBwZXIucXVlcnlTZWxlY3RvcignW2RhdGEtbmFtZT1cIm1lZGlhXCJdJylcclxuICAgICAgICAgICAgaW5pdFZlcnRpY2FsVGV4dFNsaWRlcignI2Rlc2t0b3BWZXJ0aWNhbFRleHRTbGlkZXInKVxyXG4gICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5ob2JieWRlc2t0b3AtJywgJ2F1dG8nKVxyXG4gICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5wcm9qZWN0c2Rlc2t0b3AtJywgJ2F1dG8nKVxyXG4gICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5tZWRpYWRlc2t0b3AtJywgJ2F1dG8nKVxyXG4gICAgICAgICAgICBzZWN0aW9uLnN0eWxlLndpZHRoID0gJzk1JSdcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoc2VjdGlvbi5kYXRhc2V0Lm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2Fib3V0JzpcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLWRlc2t0b3BfX2NvbnRlbnQnKS5zdHlsZS5yaWdodCA9ICdjYWxjKDEwMCUgLSA0MTJweCknXHJcbiAgICAgICAgICAgICAgICAgICAgYWJvdXQuc3R5bGUubGVmdCA9ICcyLjUlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGhvYmJ5LnN0eWxlLmxlZnQgPSAnOTcuNSUnXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHMuc3R5bGUucmlnaHQgPSAnLTI1JSdcclxuICAgICAgICAgICAgICAgICAgICBtZWRpYS5zdHlsZS5yaWdodCA9ICctOTAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnaG9iYnknOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tZGVza3RvcF9fY29udGVudCcpLnN0eWxlLmxlZnQgPSAnMHB4J1xyXG4gICAgICAgICAgICAgICAgICAgIGFib3V0LnN0eWxlLmxlZnQgPSAnLTMwJSdcclxuICAgICAgICAgICAgICAgICAgICBob2JieS5zdHlsZS5sZWZ0ID0gJzIuNSUnXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHMuc3R5bGUucmlnaHQgPSAnLTEwJSdcclxuICAgICAgICAgICAgICAgICAgICBtZWRpYS5zdHlsZS5yaWdodCA9ICctNDAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAncHJvamVjdHMnOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tbmFtZScpLnN0eWxlLmxlZnQgPSAnMCdcclxuICAgICAgICAgICAgICAgICAgICBhYm91dC5zdHlsZS5sZWZ0ID0gJy01MCUnXHJcbiAgICAgICAgICAgICAgICAgICAgaG9iYnkuc3R5bGUubGVmdCA9ICctMjAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RzLnN0eWxlLnJpZ2h0ID0gJzIuNSUnXHJcbiAgICAgICAgICAgICAgICAgICAgbWVkaWEuc3R5bGUucmlnaHQgPSAnLTMwJSdcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdtZWRpYSc6XHJcbiAgICAgICAgICAgICAgICAgICAgYWJvdXQuc3R5bGUubGVmdCA9ICctNjAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGhvYmJ5LnN0eWxlLmxlZnQgPSAnLTMwJSdcclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0cy5zdHlsZS5yaWdodCA9ICc5Ny41JSdcclxuICAgICAgICAgICAgICAgICAgICBtZWRpYS5zdHlsZS5yaWdodCA9ICcyLjUlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGFuZ2VQYWdlOiAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLmNsYXNzTGlzdC5hZGQoJ3BhZ2UtY2hhbmdpbmcnKVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZS50YXJnZXQuaHJlZiwgNzAwKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hlY2tJc0FjdGl2ZUxpbms6IChsaW5rKSA9PiB7XHJcbiAgICAgICAgICAgIGxpbmsuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgICAgICAgICAgbGluay5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS1kaXZpZGVyJylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGlzTWFya2VkID0gZmFsc2U7XHJcbiAgICBjb25zdCBtZW51SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKGhhbWJ1cmdlck1lbnUucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpICYmIHV0aWxzLiRlbCgnLmhhbWJ1cmdlcl9fc2VjdGlvbl9fZmluYWxseV9vcGVuZWQnKSkge1xyXG4gICAgICAgICAgICB1dGlscy5jaGVja0lzQWN0aXZlTGluayh1dGlscy4kZWwoJy5hY3RpdmUnKSlcclxuICAgICAgICAgICAgaXNNYXJrZWQgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlzTWFya2VkICYmIGNsZWFySW50ZXJ2YWwobWVudUludGVydmFsKVxyXG4gICAgfSwgMTAwKVxyXG5cclxuICAgIC8vINCa0LvQvtC90LjRgNGD0LXQvCDRiNCw0L/QutGDLCDRh9GC0L7QsdGLINCy0YvRh9C40YHQu9C40YLRjCDQtNC70LjQvdGDINC/0YPQvdC60YLQvtCyINC80LXQvdGOINC00LvRjyDQuNGFINC/0LvQsNCy0L3QvtC5INCw0L3QuNC80LDRhtC40LhcclxuICAgIGFuaW1hdGlvbnNQb2x5Z29uLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJiZWdpbicsIGhhbWJ1cmdlck1lbnUuY2xvbmVOb2RlKHRydWUpKVxyXG4gICAgYW5pbWF0aW9uc1BvbHlnb24ucXVlcnlTZWxlY3RvcignI2hhbWJ1cmdlclNlY3Rpb24nKS5pZCA9ICcnXHJcbiAgICBjb25zdCBoZWFkZXJMaW5rc0NvcHkgPSBhbmltYXRpb25zUG9seWdvbi5xdWVyeVNlbGVjdG9yQWxsKCdhJylcclxuICAgIGhlYWRlckxpbmtzQ29weS5mb3JFYWNoKChhLCBpKSA9PiB7XHJcbiAgICAgICAgaWYgKGkgIT09IGhlYWRlckxpbmtzQ29weS5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgIGEuc3R5bGUud2lkdGggPSAnYXV0bydcclxuICAgICAgICAgICAgYS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGVza3RvcC1saW5rcycpLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKS5mb3JFYWNoKGEgPT4gYS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgdXRpbHMuY2hhbmdlUGFnZShlKVxyXG4gICAgfSkpXHJcblxyXG4gICAgaGFtYnVyZ2VyTWVudS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaGFtYnVyZ2VyTWVudS5jbGFzc0xpc3QuYWRkKCdoYW1idXJnZXJfX3NlY3Rpb25fX29wZW5lZCcpXHJcbiAgICAgICAgaGFtYnVyZ2VyTWVudS5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGhhbWJ1cmdlck1lbnUuY2xhc3NMaXN0LmFkZCgnaGFtYnVyZ2VyX19zZWN0aW9uX19maW5hbGx5X29wZW5lZCcpXHJcbiAgICAgICAgICAgIGhhbWJ1cmdlck1lbnUucXVlcnlTZWxlY3RvckFsbCgnYScpLmZvckVhY2goKGEsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpICE9PSBoZWFkZXJMaW5rc0NvcHkubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGEuc3R5bGUud2lkdGggPSBoZWFkZXJMaW5rc0NvcHlbaV0ub2Zmc2V0V2lkdGggKyAncHgnXHJcbiAgICAgICAgICAgICAgICAgICAgYS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmNoYW5nZVBhZ2UoZSlcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIGlmIChwcmltYXJ5KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGRlc2t0b3BQcmltYXJ5V3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLXNsaWRlci1kZXNrdG9wJylcclxuICAgICAgICBjb25zdCBkZXNrdG9wUHJpbWFyeVNlY3Rpb25zID0gZGVza3RvcFByaW1hcnlXcmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uLWRlc2t0b3AnKVxyXG4gICAgICAgIGNvbnN0IGRlc2t0b3BQcmltYXJ5SW5uZXJTbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbWFyeVN3aXBlckRlc2t0b3AnKVxyXG4gICAgICAgIGRlc2t0b3BQcmltYXJ5U2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHtcclxuICAgICAgICAgICAgc2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGluaXREZXNrdG9wSW5uZXJTbGlkZXIoc2VjdGlvbi5kYXRhc2V0Lm9yZGVyKVxyXG4gICAgICAgICAgICAgICAgdXRpbHMuZXhwYW5kUHJpbWFyeVNlY3Rpb25PbkRlc2t0b3Aoc2VjdGlvbilcclxuICAgICAgICAgICAgICAgIHNlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBkZXNrdG9wUHJpbWFyeUlubmVyU2xpZGVyLnN0eWxlLnRvcCA9ICcwJ1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZGVza3RvcFByaW1hcnlJbm5lclNsaWRlci5jbGFzc0xpc3QuYWRkKCdzaG93ZWQnKSwgMzUwKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjb25zdCAkaW5uZXJTbGlkZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbm5lci1zZWN0aW9uLXNsaWRlcicpXHJcblxyXG4gICAgICAgIGNvbnN0IHByb2plY3RzU2xpZGVyID0gbmV3IFN3aXBlcignLnByb2plY3RzLXNsaWRlcicsIHtcclxuICAgICAgICAgICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXHJcbiAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDE1LFxyXG4gICAgICAgICAgICBzY3JvbGxiYXI6IHtcclxuICAgICAgICAgICAgICAgIHZlcnRpY2FsQ2xhc3M6ICdkLW5vbmUnXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvLyBOYXZpZ2F0aW9uIGFycm93c1xyXG4gICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICBuZXh0RWw6ICcucHJvamVjdHMtbmV4dCcsXHJcbiAgICAgICAgICAgICAgICBwcmV2RWw6ICcucHJvamVjdHMtcHJldicsXHJcbiAgICAgICAgICAgICAgICBsb2NrQ2xhc3M6ICdkLW5vbmUnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY29uc3QgaW5pdElubmVyU2xpZGVyID0gKGluaXRpYWxTbGlkZVBvc2lpdG9uKSA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBTd2lwZXIoJyNpbm5lclByaW1hcnlTbGlkZXInLCB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiBcImF1dG9cIixcclxuICAgICAgICAgICAgICAgIGNlbnRlcmVkU2xpZGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBsb29wZWRTbGlkZXM6IDQsXHJcbiAgICAgICAgICAgICAgICBjZW50ZXJlZFNsaWRlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBrZXlib2FyZDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgb25seUluVmlld3BvcnQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW5pdGlhbFNsaWRlOiBOdW1iZXIoaW5pdGlhbFNsaWRlUG9zaWl0b24pLFxyXG4gICAgICAgICAgICAgICAgb246IHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uRW5kOiBmdW5jdGlvbiAoc3dpcGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN3aXBlci5zbGlkZXNbc3dpcGVyLmFjdGl2ZUluZGV4XS5jaGlsZE5vZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN3aXBlci5zbGlkZXNbc3dpcGVyLmFjdGl2ZUluZGV4XS5jaGlsZE5vZGVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwcmltYXJ5U2xpZGVyID0gbmV3IFN3aXBlcihcIiNwcmltYXJ5U2xpZGVyXCIsIHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgIGNlbnRlcmVkU2xpZGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxyXG4gICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgICAgICBsb29wZWRTbGlkZXM6IDQsXHJcbiAgICAgICAgICAgIC8vIGtleWJvYXJkOiB7XHJcbiAgICAgICAgICAgIC8vICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyAgICAgb25seUluVmlld3BvcnQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAvLyB9LFxyXG4gICAgICAgICAgICBpbml0aWFsU2xpZGU6IDAsXHJcbiAgICAgICAgICAgIG9uOiB7XHJcbiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXMuZm9yRWFjaCgoc2xpZGUsIG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuc3R5bGUuekluZGV4ID0gdGhpcy5zbGlkZXMubGVuZ3RoIC0gblxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXNbdGhpcy5hY3RpdmVJbmRleF0uc3R5bGUuekluZGV4ID0gMTBcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKHN3aXBlciwgZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlID0gZS5wYXRoLmZpbmQoZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShlbC5jbGFzc0xpc3QpLmluY2x1ZGVzKCdzd2lwZXItc2xpZGUtYWN0aXZlJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLnN0eWxlLndpZHRoID0gJzEwMiUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLnN0eWxlLmJveFNoYWRvdyA9ICdub25lJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2lwZXIuZGlzYWJsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gc2xpZGUucXVlcnlTZWxlY3RvcignLnNlY3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdyYXBwZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHNlY3Rpb24uZGF0YXNldC5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWJvdXQnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVyID0gc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuaW5uZXItc2VjdGlvbi1zbGlkZXInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMycpLmluc2VydEFkamFjZW50RWxlbWVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWZ0ZXJiZWdpbicsICRpbm5lclNsaWRlckVsLmNsb25lTm9kZSh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbm5lclNsaWRlckVsLmlubmVySFRNTCA9ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0SW5uZXJTbGlkZXIoc2VjdGlvbi5kYXRhc2V0LmlubmVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuZXhwYW5kUHJpbWFyeVNlY3Rpb24oc2VjdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdob2JieSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncHJvamVjdHMnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ21lZGlhJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlciA9IHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTInKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdyYXBwZXIucXVlcnlTZWxlY3RvcignLmlubmVyLXNlY3Rpb24tc2xpZGVyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTInKS5pbnNlcnRBZGphY2VudEVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FmdGVyYmVnaW4nLCAkaW5uZXJTbGlkZXJFbC5jbG9uZU5vZGUodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW5uZXJTbGlkZXJFbC5pbm5lckhUTUwgPSAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdElubmVyU2xpZGVyKHNlY3Rpb24uZGF0YXNldC5pbm5lcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmV4cGFuZFByaW1hcnlTZWN0aW9uKHNlY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIC8vIGFjdGl2ZUluZGV4Q2hhbmdlOiBmdW5jdGlvbiAoc3dpcGVyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5zbGlkZXMuZm9yRWFjaCgoc2xpZGUsIG4pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2xpZGUuc3R5bGUud2lkdGggPSAnMjUlJ1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIH0pXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5zbGlkZXNbdGhpcy5hY3RpdmVJbmRleF0uc3R5bGUud2lkdGggPSAnNDAlJ1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgICAgIC8vICAgZWw6IFwiLnN3aXBlci1wYWdpbmF0aW9uXCIsXHJcbiAgICAgICAgICAgIC8vICAgY2xpY2thYmxlOiB0cnVlXHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIGluaXRJbm5lclNsaWRlcigpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHV0aWxzLiRlbCgnLmJsYWNrLXNsaWRlcicpKSB7XHJcbiAgICAgICAgbmV3IFN3aXBlcignLmJsYWNrLXNsaWRlcicsIHtcclxuICAgICAgICAgICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXHJcbiAgICAgICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjQsXHJcbiAgICAgICAgICAgIHNjcm9sbGJhcjoge1xyXG4gICAgICAgICAgICAgICAgdmVydGljYWxDbGFzczogJ2Qtbm9uZSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb246IHtcclxuICAgICAgICAgICAgICAgIGFmdGVySW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkZWxheSA9IDYwMFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVzLmZvckVhY2goKHNsaWRlLCBuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuc3R5bGUub3BhY2l0eSA9ICcxJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBkZWxheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXkgKz0gMjAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAga2V5Ym9hcmQ6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBvbmx5SW5WaWV3cG9ydDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW91c2V3aGVlbDogdHJ1ZSxcclxuICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgbmV4dEVsOiBgLmJsYWNrLXNsaWRlci1uZXh0YCxcclxuICAgICAgICAgICAgICAgIHByZXZFbDogYC5ibGFjay1zbGlkZXItcHJldmAsXHJcbiAgICAgICAgICAgICAgICBsb2NrQ2xhc3M6ICdkLW5vbmUnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAgICAgICA5OTY6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAzLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIDEwNTA6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG5ld3MpIHtcclxuICAgICAgICBpc01hcmtlZCAmJiBjbGVhckludGVydmFsKG1lbnVJbnRlcnZhbClcclxuICAgICAgICBsZXQgZGVsYXkgPSAyMDBcclxuICAgICAgICBuZXdzLnF1ZXJ5U2VsZWN0b3JBbGwoJy5uZXdzLWl0ZW0nKS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGl0ZW0uc3R5bGUub3BhY2l0eSA9IDEsIGRlbGF5KVxyXG4gICAgICAgICAgICBkZWxheSArPSAyMDBcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBuZXcgU3dpcGVyKCcuaG9yaXpvbnRhbC1kZXNrdG9wLXNsaWRlcicsIHtcclxuICAgICAgICAgICAgZGlyZWN0aW9uOiAndmVydGljYWwnLFxyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMTAsXHJcbiAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgICAgICAgICAgOTk2OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcclxuICAgICAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDM2LFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBrZXlib2FyZDoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG9ubHlJblZpZXdwb3J0OiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtb3VzZXdoZWVsOiB0cnVlLFxyXG4gICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICBuZXh0RWw6IGAuc3dpcGVyLWJ1dHRvbi1uZXh0YCxcclxuICAgICAgICAgICAgICAgIHByZXZFbDogYC5zd2lwZXItYnV0dG9uLXByZXZgLFxyXG4gICAgICAgICAgICAgICAgbG9ja0NsYXNzOiAnZC1ub25lJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHV0aWxzLiRlbCgnLnNpbmdsZS1wYWdlJykpIHtcclxuXHJcbiAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcuc2luZ2xlLXNsaWRlcicsICdhdXRvJywgMzApXHJcbiAgICB9XHJcbn0pIl19
