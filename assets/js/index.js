document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("animationsPolygon"),t=document.getElementById("hamburgerSection"),i=(document.getElementById("primarySlider"),document.querySelectorAll(".section"),document.querySelector(".primary")),s=document.querySelector(".news"),l=(e,t=2,i=15)=>new Swiper(e,{direction:"vertical",loop:!0,slidesPerView:t,spaceBetween:Number(i),scrollbar:{verticalClass:"d-none"},on:{afterInit:function(){let e=500;this.slides.forEach((t,i)=>{setTimeout(()=>{t.style.opacity="1"},e),e+=200})}},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,navigation:{nextEl:e.slice(0,e.indexOf("-"))+"-next",prevEl:e.slice(0,e.indexOf("-"))+"-prev",lockClass:"d-none"}}),n=()=>{new Swiper("#mediaSlider",{slidesPerView:"auto",centeredSlides:!1,spaceBetween:0,loop:!0,centeredSlides:!1,initialSlide:0,on:{afterInit:function(){let e=500;this.slides.forEach((t,i)=>{setTimeout(()=>{t.style.opacity="1"},e),e+=200})}}})},o=e=>{new Swiper(".primary-swiper-desktop",{slidesPerView:"auto",spaceBetween:0,loop:!0,loopedSlides:4,centeredSlides:!0,initialSlide:Number(e),keyboard:{enabled:!0,onlyInViewport:!0},on:{activeIndexChange:function(){const{activeIndex:e}=this;this.slides.forEach((t,i)=>{i===e?(t.querySelector(".active-content").style.opacity="1",t.querySelector(".inactive-content").style.opacity="0"):(t.querySelector(".active-content").style.opacity="0",t.querySelector(".inactive-content").style.opacity="1")})}}})},r=e=>document.querySelector(e),a=e=>{const t=e.querySelector(`[data-position-${e.dataset.name}="outer"]`),i=e.querySelectorAll(`[data-position-${e.dataset.name}="inner"]`);switch(e.dataset.name){case"about":e.querySelector(".slide-1").classList.add("slide-1__scrolled"),e.querySelector(".slide-3").classList.add("slide-3__scrolled"),l(".hobby-slider"),l(".projects-slider"),n();break;case"hobby":i.forEach(e=>e.style.display="none"),e.querySelector(".slide-1").classList.add("slide-1__scrolled"),e.querySelector(".section-name").classList.add("section-name__scrolled"),e.querySelector(".slide-2").classList.add("slide-2__scrolled"),e.addEventListener("animationend",(function(){t.style.display="none",i.forEach(e=>e.style.display="block"),l(".hobby-slider"),l(".projects-slider"),n()}));break;case"projects":i.forEach(e=>e.style.display="none"),e.querySelector(".slide-2").classList.add("slide-2__scrolled"),e.querySelector(".section-name").classList.add("section-name__scrolled"),e.addEventListener("animationend",(function(){t.style.display="none",i.forEach(e=>e.style.display="block"),l(".projects-slider"),l(".hobby-slider"),n()}));break;case"media":e.querySelector(".slide-1").classList.add("slide-1__scrolled"),e.querySelector(".slide-2").classList.add("slide-2__scrolled"),e.querySelector(".slide-2").addEventListener("animationend",(function(){l(".projects-slider"),l(".hobby-slider"),n()}))}},c=e=>{const t=document.querySelector(".section-slider-desktop"),i=t.querySelector('[data-name="about"]'),s=t.querySelector('[data-name="hobby"]'),n=t.querySelector('[data-name="projects"]'),o=t.querySelector('[data-name="media"]');switch(l(".hobbydesktop-","auto"),l(".projectsdesktop-","auto"),l(".mediadesktop-","auto"),e.style.width="95%",e.dataset.name){case"about":e.querySelector(".section-desktop__content").style.right="calc(100% - 412px)",i.style.left="2.5%",s.style.left="97.5%",n.style.right="-25%",o.style.right="-50%";break;case"hobby":e.querySelector(".section-desktop__content").style.left="0px",i.style.left="-30%",s.style.left="2.5%",n.style.right="-10%",o.style.right="-40%";break;case"projects":e.querySelector(".section-name").style.left="0",i.style.left="-50%",s.style.left="-20%",n.style.right="2.5%",o.style.right="-30%";break;case"media":i.style.left="-60%",s.style.left="-30%",n.style.right="97.5%",o.style.right="2.5%"}},d=e=>{e.preventDefault(),document.querySelector("main").classList.add("page-changing"),setTimeout(()=>window.location.href=e.target.href,700)},y=e=>{e.classList.add("active"),e.previousElementSibling.classList.add("active-divider")};let u=!1;const p=setInterval(()=>{t.querySelector(".active")&&r(".hamburger__section__finally_opened")&&(y(r(".active")),u=!0),u&&clearInterval(p)},100);e.insertAdjacentElement("afterbegin",t.cloneNode(!0)),e.querySelector("#hamburgerSection").id="";const S=e.querySelectorAll("a");if(S.forEach((e,t)=>{t!==S.length-1&&(e.style.width="auto",e.style.visibility="visible")}),document.querySelector(".desktop-links").querySelectorAll("a").forEach(e=>e.addEventListener("click",(function(e){d(e)}))),t.addEventListener("click",(function(e){t.classList.add("hamburger__section__opened"),t.addEventListener("animationend",()=>{t.classList.add("hamburger__section__finally_opened"),t.querySelectorAll("a").forEach((e,t)=>{t!==S.length-1&&(e.style.width=S[t].offsetWidth+"px",e.addEventListener("click",(function(e){d(e)})))})})})),i){const e=document.querySelector(".section-slider-desktop").querySelectorAll(".section-desktop"),t=document.getElementById("primarySwiperDesktop");e.forEach(e=>{e.addEventListener("click",(function(){o(e.dataset.order),c(e),e.addEventListener("transitionend",()=>{t.style.top="0",setTimeout(()=>t.classList.add("showed"),350)})}))});const i=document.querySelector(".inner-section-slider"),s=(new Swiper(".projects-slider",{direction:"vertical",loop:!1,slidesPerView:2,spaceBetween:15,scrollbar:{verticalClass:"d-none"},navigation:{nextEl:".projects-next",prevEl:".projects-prev",lockClass:"d-none"},on:{}}),e=>{new Swiper("#innerPrimarySlider",{slidesPerView:"auto",centeredSlides:!1,spaceBetween:0,loop:!0,loopedSlides:4,centeredSlides:!1,keyboard:{enabled:!0,onlyInViewport:!0},initialSlide:Number(e),on:{slideChange:function(e){console.log(e.slides[e.activeIndex].childNode)}}})});new Swiper("#primarySlider",{slidesPerView:"auto",centeredSlides:!1,spaceBetween:0,loop:!0,loopedSlides:4,initialSlide:0,on:{init:function(){this.slides.forEach((e,t)=>{e.style.zIndex=this.slides.length-t}),this.slides[this.activeIndex].style.zIndex=10},click:function(e,t){const l=t.path.find(e=>{if(e.classList)return Array.from(e.classList).includes("swiper-slide-active")});l&&(l.style.width="102%",l.style.boxShadow="none",e.disable(),l.addEventListener("transitionend",(function(){const e=l.querySelector(".section");let t;switch(e.dataset.name){case"about":t=e.querySelector(".slide-3"),t.querySelector(".inner-section-slider")||(e.querySelector(".slide-3").insertAdjacentElement("afterbegin",i.cloneNode(!0)),i.innerHTML="",s(e.dataset.inner),a(e));break;case"hobby":case"projects":case"media":t=e.querySelector(".slide-2"),t.querySelector(".inner-section-slider")||(e.querySelector(".slide-2").insertAdjacentElement("afterbegin",i.cloneNode(!0)),i.innerHTML="",s(e.dataset.inner),a(e))}})))}}})}if(r(".black-slider")&&new Swiper(".black-slider",{direction:"vertical",loop:!0,slidesPerView:2,spaceBetween:24,scrollbar:{verticalClass:"d-none"},on:{afterInit:function(){let e=600;this.slides.forEach((t,i)=>{setTimeout(()=>{t.style.opacity="1"},e),e+=200})}},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,navigation:{nextEl:".black-slider-next",prevEl:".black-slider-prev",lockClass:"d-none"}}),s){u&&clearInterval(p);let e=200;s.querySelectorAll(".news-item").forEach(t=>{setTimeout(()=>t.style.opacity=1,e),e+=200}),new Swiper(".horizontal-desktop-slider",{direction:"vertical",slidesPerView:"auto",spaceBetween:10,loop:!1,breakpoints:{996:{slidesPerView:3,direction:"horizontal",spaceBetween:36}},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",lockClass:"d-none"}})}r(".single-page")&&l(".single-slider","auto",30)}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiaGFtYnVyZ2VyTWVudSIsImdldEVsZW1lbnRCeUlkIiwicHJpbWFyeVNsaWRlclNlY3Rpb24iLCJwcmltYXJ5U2VjdGlvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJpbWFyeSIsInF1ZXJ5U2VsZWN0b3IiLCJpbml0VmVydGljYWxTbGlkZXIiLCJzbGlkZXNQZXJWaWV3IiwiJGVsIiwic3BhY2VCZXR3ZWVuIiwiU3dpcGVyIiwic2Nyb2xsYmFyIiwidmVydGljYWxDbGFzcyIsIk51bWJlciIsIm9uIiwiZGVsYXkiLCJzbGlkZXMiLCJmb3JFYWNoIiwic2V0VGltZW91dCIsInN0eWxlIiwib3BhY2l0eSIsInNsaWRlIiwibiIsIm9ubHlJblZpZXdwb3J0IiwiZW5hYmxlZCIsIm5hdmlnYXRpb24iLCJwcmV2RWwiLCJzbGljZSIsImxvY2tDbGFzcyIsImluZGV4T2YiLCJjZW50ZXJlZFNsaWRlcyIsImluaXRpYWxTbGlkZSIsImFmdGVySW5pdCIsImluaXRpYWxTbGlkZVBvc2lpdG9uIiwibG9vcGVkU2xpZGVzIiwia2V5Ym9hcmQiLCJhY3RpdmVJbmRleCIsImV4cGFuZFByaW1hcnlTZWN0aW9uIiwib3V0ZXJOYW1lIiwic2VjdGlvbiIsInNlbGVjdG9yIiwiZGF0YXNldCIsIm5hbWUiLCJhZGQiLCJjbGFzc0xpc3QiLCJpbml0TWVkaWFTbGlkZXIiLCJkaXNwbGF5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImlubmVyTmFtZSIsImRlc2t0b3BQcmltYXJ5V3JhcHBlciIsImV4cGFuZFByaW1hcnlTZWN0aW9uT25EZXNrdG9wIiwicHJvamVjdHMiLCJtZWRpYSIsIndpZHRoIiwicmlnaHQiLCJhYm91dCIsImxlZnQiLCJob2JieSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsInRhcmdldCIsImxpbmsiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwibWVudUludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJ1dGlscyIsImlzTWFya2VkIiwiY2hlY2tJc0FjdGl2ZUxpbmsiLCJjbGVhckludGVydmFsIiwiY2xvbmVOb2RlIiwiYW5pbWF0aW9uc1BvbHlnb24iLCJpZCIsImhlYWRlckxpbmtzQ29weSIsImluc2VydEFkamFjZW50RWxlbWVudCIsImxlbmd0aCIsImEiLCJpIiwib2Zmc2V0V2lkdGgiLCJkZXNrdG9wUHJpbWFyeVNlY3Rpb25zIiwiZGVza3RvcFByaW1hcnlJbm5lclNsaWRlciIsImluaXREZXNrdG9wSW5uZXJTbGlkZXIiLCJvcmRlciIsInRvcCIsImRpcmVjdGlvbiIsIm5leHRFbCIsInNsaWRlQ2hhbmdlIiwiY29uc29sZSIsImxvZyIsInN3aXBlciIsImNoaWxkTm9kZSIsInpJbmRleCIsImxvb3AiLCJpbml0IiwidGhpcyIsImJveFNoYWRvdyIsIndyYXBwZXIiLCJlbCIsIkFycmF5IiwiZnJvbSIsImluY2x1ZGVzIiwiJGlubmVyU2xpZGVyRWwiLCJpbml0SW5uZXJTbGlkZXIiLCJpbm5lckhUTUwiLCJpbm5lciIsIm1vdXNld2hlZWwiLCJpdGVtIiwiYnJlYWtwb2ludHMiLCJuZXdzIiwiOTk2Il0sIm1hcHBpbmdzIjoiQUFRSUEsU0FBTUMsaUJBQWdCRCxvQkFBU0UsV0FDL0IsTUFBTUMsRUFBb0JILFNBQVdFLGVBQVIscUJBQ3ZCRSxFQUFrQkosU0FBU0ssZUFBQUEsb0JBQzNCQyxHQUFtQkMsU0FBY0wsZUFBdkMsaUJBQ3NCSyxTQUFURixpQkFBYixZQURnQkwsU0FBU08sY0FBYyxhQUdqQ0MsRUFBQUEsU0FBa0JELGNBQVNFLFNBRXpCRCxFQUFBLENBQUFFLEVBQUFELEVBQUEsRUFBQUUsRUFBQSxLQUNTLElBQUVDLE9BQUFGLEVBRlEsQ0FJbkJELFVBQWVBLFdBQ2ZFLE1BQVksRUFDWkUsY0FBV0osRUFDUEssYUFBZUMsT0FBQUosR0FQQUUsVUFBQSxDQVNmQyxjQUFBLFVBRUlFLEdBQUlDLENBQ0NDLFVBQU9DLFdBQ1JDLElBQVdILEVB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QyxJQUFBQSxPQUFXLGdCQUFZLENBRW5Cc0QsVUFBWXJFLFdBQ1JDLE1BQUFBLEVBQ0lHLGNBQVlELEVBQ2ZYLGFBRkQsR0FHQU0sVUFBUyxDQUpiSCxjQUFBLFVBWmdCRSxHQUFBLENBb0Jka0IsVUFBQSxXQUNHLElBREhqQixFQUFBLElBRU5RLEtBQWdCUCxPQUFBQyxRQUFBLENBQUFJLEVBQUFDLEtBdEJJSixXQUFBLEtBQUFHLEVBQUFGLE1BQUFDLFFBQUEsS0F5QlpMLEdBQ0NBLEdBQUEsUUExQmpCb0IsU0FBQSxDQStCSFgsU0FBQSxFQVRXRCxnQkFBZ0IsR0FZaEJvRixZQUFJcEMsRUFDUnhELFdBQUosQ0FDS1osT0FBTCxxQkFDY3VCLE9BQU9rRixxQkFDUmhGLFVBQVQsWUFNQW5CLEVBQUFBLENBQ0FxRixHQUpxQ3ZCLGNBQUFMLEdBS3JDMkMsSUFBQUEsRUFBYSxJQUNUQyxFQUFLM0csaUJBQUEsY0FBQWMsUUFBQTJGLElBQ0RyRyxXQUFhLElBRFpxRyxFQUFBekYsTUFBQUMsUUFBQSxFQUFBTCxHQUVEdUUsR0FBVyxNQVJrQixJQUFBNUUsT0FBQSw2QkFBQSxDQVlyQ3lCLFVBQVUsV0FDTlgsY0FETSxPQUVORCxhQUFnQixHQWRpQnVFLE1BQUEsRUFnQnJDYSxZQWhCcUMsQ0FpQjNCSSxJQUFFLENBQ0N4RyxjQUFBLEVBQ0ErRSxVQUFBLGFBQ0U3RSxhQUFBLEtBR3RCMEIsU0FBQSxDQVZXWCxTQUFTLEVBWVBELGdCQUFkLEdBR0NvRixZQUFBLEVBM2dCTGxGLFdBQUEsQ0FpZ0JnQjhELE9BQVMsc0JBQ1Q3RCxPQUFTLHNCQUNURSxVQUFXLFlBS25Cd0MsRUFBVSxpQkFFVjlELEVBQW1CLGlCQUFrQixPQUFRIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9hYm91dCAtNjYuMjV2d1xyXG4vL2hvYmJ5IC05My43NXZ3XHJcbi8vcHJvamVjdHMgLTExMS4yNXZ3XHJcbi8vbWVkaWEgLTEzMy43NXZ3XHJcblxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGFuaW1hdGlvbnNQb2x5Z29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FuaW1hdGlvbnNQb2x5Z29uJylcclxuICAgIGNvbnN0IGhhbWJ1cmdlck1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGFtYnVyZ2VyU2VjdGlvbicpXHJcbiAgICBjb25zdCBwcmltYXJ5U2xpZGVyU2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmltYXJ5U2xpZGVyJylcclxuICAgIGNvbnN0IHByaW1hcnlTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uJylcclxuICAgIGNvbnN0IHByaW1hcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJpbWFyeScpXHJcbiAgICBjb25zdCBuZXdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ld3MnKVxyXG5cclxuICAgIGNvbnN0IGluaXRWZXJ0aWNhbFNsaWRlciA9ICgkZWwsIHNsaWRlc1BlclZpZXcgPSAyLCBzcGFjZUJldHdlZW4gPSAxNSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgU3dpcGVyKCRlbCwge1xyXG4gICAgICAgICAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcclxuICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogc2xpZGVzUGVyVmlldyxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiBOdW1iZXIoc3BhY2VCZXR3ZWVuKSxcclxuICAgICAgICAgICAgc2Nyb2xsYmFyOiB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbENsYXNzOiAnZC1ub25lJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbjoge1xyXG4gICAgICAgICAgICAgICAgYWZ0ZXJJbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRlbGF5ID0gNTAwXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXMuZm9yRWFjaCgoc2xpZGUsIG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5zdHlsZS5vcGFjaXR5ID0gJzEnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGRlbGF5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxheSArPSAyMDBcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBrZXlib2FyZDoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG9ubHlJblZpZXdwb3J0OiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtb3VzZXdoZWVsOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBOYXZpZ2F0aW9uIGFycm93c1xyXG4gICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICBuZXh0RWw6IGAkeyRlbC5zbGljZSgwLCAkZWwuaW5kZXhPZignLScpKX0tbmV4dGAsXHJcbiAgICAgICAgICAgICAgICBwcmV2RWw6IGAkeyRlbC5zbGljZSgwLCAkZWwuaW5kZXhPZignLScpKX0tcHJldmAsXHJcbiAgICAgICAgICAgICAgICBsb2NrQ2xhc3M6ICdkLW5vbmUnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaW5pdE1lZGlhU2xpZGVyID0gKCkgPT4ge1xyXG4gICAgICAgIG5ldyBTd2lwZXIoJyNtZWRpYVNsaWRlcicsIHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgIGNlbnRlcmVkU2xpZGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxyXG4gICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgICAgICBjZW50ZXJlZFNsaWRlczogZmFsc2UsXHJcbiAgICAgICAgICAgIGluaXRpYWxTbGlkZTogMCxcclxuICAgICAgICAgICAgb246IHtcclxuICAgICAgICAgICAgICAgIGFmdGVySW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkZWxheSA9IDUwMFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVzLmZvckVhY2goKHNsaWRlLCBuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuc3R5bGUub3BhY2l0eSA9ICcxJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBkZWxheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXkgKz0gMjAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGluaXREZXNrdG9wSW5uZXJTbGlkZXIgPSAoaW5pdGlhbFNsaWRlUG9zaWl0b24pID0+IHtcclxuICAgICAgICBuZXcgU3dpcGVyKCcucHJpbWFyeS1zd2lwZXItZGVza3RvcCcsIHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgbG9vcGVkU2xpZGVzOiA0LFxyXG4gICAgICAgICAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcclxuICAgICAgICAgICAgaW5pdGlhbFNsaWRlOiBOdW1iZXIoaW5pdGlhbFNsaWRlUG9zaWl0b24pLFxyXG4gICAgICAgICAgICBrZXlib2FyZDoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG9ubHlJblZpZXdwb3J0OiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbjoge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlSW5kZXhDaGFuZ2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgfSA9IHRoaXNcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlcy5mb3JFYWNoKChzbGlkZSwgbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9PT0gYWN0aXZlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUtY29udGVudCcpLnN0eWxlLm9wYWNpdHkgPSAnMSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLnF1ZXJ5U2VsZWN0b3IoJy5pbmFjdGl2ZS1jb250ZW50Jykuc3R5bGUub3BhY2l0eSA9ICcwJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUucXVlcnlTZWxlY3RvcignLmFjdGl2ZS1jb250ZW50Jykuc3R5bGUub3BhY2l0eSA9ICcwJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUucXVlcnlTZWxlY3RvcignLmluYWN0aXZlLWNvbnRlbnQnKS5zdHlsZS5vcGFjaXR5ID0gJzEnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHV0aWxzID0ge1xyXG4gICAgICAgICRlbDogKHNlbGVjdG9yKSA9PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSxcclxuICAgICAgICBleHBhbmRQcmltYXJ5U2VjdGlvbjogKHNlY3Rpb24pID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb3V0ZXJOYW1lID0gc2VjdGlvbi5xdWVyeVNlbGVjdG9yKGBbZGF0YS1wb3NpdGlvbi0ke3NlY3Rpb24uZGF0YXNldC5uYW1lfT1cIm91dGVyXCJdYClcclxuICAgICAgICAgICAgY29uc3QgaW5uZXJOYW1lID0gc2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKGBbZGF0YS1wb3NpdGlvbi0ke3NlY3Rpb24uZGF0YXNldC5uYW1lfT1cImlubmVyXCJdYClcclxuICAgICAgICAgICAgc3dpdGNoIChzZWN0aW9uLmRhdGFzZXQubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYWJvdXQnOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTEnKS5jbGFzc0xpc3QuYWRkKCdzbGlkZS0xX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMycpLmNsYXNzTGlzdC5hZGQoJ3NsaWRlLTNfX3Njcm9sbGVkJylcclxuICAgICAgICAgICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5ob2JieS1zbGlkZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIGluaXRWZXJ0aWNhbFNsaWRlcignLnByb2plY3RzLXNsaWRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdE1lZGlhU2xpZGVyKClcclxuICAgICAgICAgICAgICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHJhbnNwYXJlbnQtYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnaGV5JylcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlLTMnKS5jbGFzc0xpc3QuYWRkKCdzbGlkZS0zX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfSlcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2hvYmJ5JzpcclxuICAgICAgICAgICAgICAgICAgICBpbm5lck5hbWUuZm9yRWFjaChuYW1lID0+IG5hbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJylcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZS0xJykuY2xhc3NMaXN0LmFkZCgnc2xpZGUtMV9fc2Nyb2xsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tbmFtZScpLmNsYXNzTGlzdC5hZGQoJ3NlY3Rpb24tbmFtZV9fc2Nyb2xsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTInKS5jbGFzc0xpc3QuYWRkKCdzbGlkZS0yX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dGVyTmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyTmFtZS5mb3JFYWNoKG5hbWUgPT4gbmFtZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcuaG9iYnktc2xpZGVyJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcucHJvamVjdHMtc2xpZGVyJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdE1lZGlhU2xpZGVyKClcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAncHJvamVjdHMnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlubmVyTmFtZS5mb3JFYWNoKG5hbWUgPT4gbmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTInKS5jbGFzc0xpc3QuYWRkKCdzbGlkZS0yX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1uYW1lJykuY2xhc3NMaXN0LmFkZCgnc2VjdGlvbi1uYW1lX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dGVyTmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyTmFtZS5mb3JFYWNoKG5hbWUgPT4gbmFtZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcucHJvamVjdHMtc2xpZGVyJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcuaG9iYnktc2xpZGVyJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdE1lZGlhU2xpZGVyKClcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbWVkaWEnOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTEnKS5jbGFzc0xpc3QuYWRkKCdzbGlkZS0xX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMicpLmNsYXNzTGlzdC5hZGQoJ3NsaWRlLTJfX3Njcm9sbGVkJylcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZS0yJykuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5wcm9qZWN0cy1zbGlkZXInKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5ob2JieS1zbGlkZXInKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0TWVkaWFTbGlkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGV4cGFuZFByaW1hcnlTZWN0aW9uT25EZXNrdG9wOiAoc2VjdGlvbikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkZXNrdG9wUHJpbWFyeVdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1zbGlkZXItZGVza3RvcCcpXHJcbiAgICAgICAgICAgIGNvbnN0IGFib3V0ID0gZGVza3RvcFByaW1hcnlXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW5hbWU9XCJhYm91dFwiXScpXHJcbiAgICAgICAgICAgIGNvbnN0IGhvYmJ5ID0gZGVza3RvcFByaW1hcnlXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW5hbWU9XCJob2JieVwiXScpXHJcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RzID0gZGVza3RvcFByaW1hcnlXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW5hbWU9XCJwcm9qZWN0c1wiXScpXHJcbiAgICAgICAgICAgIGNvbnN0IG1lZGlhID0gZGVza3RvcFByaW1hcnlXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW5hbWU9XCJtZWRpYVwiXScpXHJcbiAgICAgICAgICAgIGluaXRWZXJ0aWNhbFNsaWRlcignLmhvYmJ5ZGVza3RvcC0nLCAnYXV0bycpXHJcbiAgICAgICAgICAgIGluaXRWZXJ0aWNhbFNsaWRlcignLnByb2plY3RzZGVza3RvcC0nLCAnYXV0bycpXHJcbiAgICAgICAgICAgIGluaXRWZXJ0aWNhbFNsaWRlcignLm1lZGlhZGVza3RvcC0nLCAnYXV0bycpXHJcbiAgICAgICAgICAgIHNlY3Rpb24uc3R5bGUud2lkdGggPSAnOTUlJ1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChzZWN0aW9uLmRhdGFzZXQubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYWJvdXQnOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tZGVza3RvcF9fY29udGVudCcpLnN0eWxlLnJpZ2h0ID0gJ2NhbGMoMTAwJSAtIDQxMnB4KSdcclxuICAgICAgICAgICAgICAgICAgICBhYm91dC5zdHlsZS5sZWZ0ID0gJzIuNSUnXHJcbiAgICAgICAgICAgICAgICAgICAgaG9iYnkuc3R5bGUubGVmdCA9ICc5Ny41JSdcclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0cy5zdHlsZS5yaWdodCA9ICctMjUlJ1xyXG4gICAgICAgICAgICAgICAgICAgIG1lZGlhLnN0eWxlLnJpZ2h0ID0gJy01MCUnXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdob2JieSc6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1kZXNrdG9wX19jb250ZW50Jykuc3R5bGUubGVmdCA9ICcwcHgnXHJcbiAgICAgICAgICAgICAgICAgICAgYWJvdXQuc3R5bGUubGVmdCA9ICctMzAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGhvYmJ5LnN0eWxlLmxlZnQgPSAnMi41JSdcclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0cy5zdHlsZS5yaWdodCA9ICctMTAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIG1lZGlhLnN0eWxlLnJpZ2h0ID0gJy00MCUnXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdwcm9qZWN0cyc6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1uYW1lJykuc3R5bGUubGVmdCA9ICcwJ1xyXG4gICAgICAgICAgICAgICAgICAgIGFib3V0LnN0eWxlLmxlZnQgPSAnLTUwJSdcclxuICAgICAgICAgICAgICAgICAgICBob2JieS5zdHlsZS5sZWZ0ID0gJy0yMCUnXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHMuc3R5bGUucmlnaHQgPSAnMi41JSdcclxuICAgICAgICAgICAgICAgICAgICBtZWRpYS5zdHlsZS5yaWdodCA9ICctMzAlJ1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ21lZGlhJzpcclxuICAgICAgICAgICAgICAgICAgICBhYm91dC5zdHlsZS5sZWZ0ID0gJy02MCUnXHJcbiAgICAgICAgICAgICAgICAgICAgaG9iYnkuc3R5bGUubGVmdCA9ICctMzAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RzLnN0eWxlLnJpZ2h0ID0gJzk3LjUlJ1xyXG4gICAgICAgICAgICAgICAgICAgIG1lZGlhLnN0eWxlLnJpZ2h0ID0gJzIuNSUnXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoYW5nZVBhZ2U6IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuY2xhc3NMaXN0LmFkZCgncGFnZS1jaGFuZ2luZycpXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gd2luZG93LmxvY2F0aW9uLmhyZWYgPSBlLnRhcmdldC5ocmVmLCA3MDApXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGVja0lzQWN0aXZlTGluazogKGxpbmspID0+IHtcclxuICAgICAgICAgICAgbGluay5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG4gICAgICAgICAgICBsaW5rLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLWRpdmlkZXInKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgaXNNYXJrZWQgPSBmYWxzZTtcclxuICAgIGNvbnN0IG1lbnVJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICBpZiAoaGFtYnVyZ2VyTWVudS5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlJykgJiYgdXRpbHMuJGVsKCcuaGFtYnVyZ2VyX19zZWN0aW9uX19maW5hbGx5X29wZW5lZCcpKSB7XHJcbiAgICAgICAgICAgIHV0aWxzLmNoZWNrSXNBY3RpdmVMaW5rKHV0aWxzLiRlbCgnLmFjdGl2ZScpKVxyXG4gICAgICAgICAgICBpc01hcmtlZCA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgaXNNYXJrZWQgJiYgY2xlYXJJbnRlcnZhbChtZW51SW50ZXJ2YWwpXHJcbiAgICB9LCAxMDApXHJcblxyXG4gICAgLy8g0JrQu9C+0L3QuNGA0YPQtdC8INGI0LDQv9C60YMsINGH0YLQvtCx0Ysg0LLRi9GH0LjRgdC70LjRgtGMINC00LvQuNC90YMg0L/Rg9C90LrRgtC+0LIg0LzQtdC90Y4g0LTQu9GPINC40YUg0L/Qu9Cw0LLQvdC+0Lkg0LDQvdC40LzQsNGG0LjQuFxyXG4gICAgYW5pbWF0aW9uc1BvbHlnb24uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgaGFtYnVyZ2VyTWVudS5jbG9uZU5vZGUodHJ1ZSkpXHJcbiAgICBhbmltYXRpb25zUG9seWdvbi5xdWVyeVNlbGVjdG9yKCcjaGFtYnVyZ2VyU2VjdGlvbicpLmlkID0gJydcclxuICAgIGNvbnN0IGhlYWRlckxpbmtzQ29weSA9IGFuaW1hdGlvbnNQb2x5Z29uLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKVxyXG4gICAgaGVhZGVyTGlua3NDb3B5LmZvckVhY2goKGEsIGkpID0+IHtcclxuICAgICAgICBpZiAoaSAhPT0gaGVhZGVyTGlua3NDb3B5Lmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgYS5zdHlsZS53aWR0aCA9ICdhdXRvJ1xyXG4gICAgICAgICAgICBhLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSdcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZXNrdG9wLWxpbmtzJykucXVlcnlTZWxlY3RvckFsbCgnYScpLmZvckVhY2goYSA9PiBhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB1dGlscy5jaGFuZ2VQYWdlKGUpXHJcbiAgICB9KSlcclxuXHJcbiAgICBoYW1idXJnZXJNZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBoYW1idXJnZXJNZW51LmNsYXNzTGlzdC5hZGQoJ2hhbWJ1cmdlcl9fc2VjdGlvbl9fb3BlbmVkJylcclxuICAgICAgICBoYW1idXJnZXJNZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgaGFtYnVyZ2VyTWVudS5jbGFzc0xpc3QuYWRkKCdoYW1idXJnZXJfX3NlY3Rpb25fX2ZpbmFsbHlfb3BlbmVkJylcclxuICAgICAgICAgICAgaGFtYnVyZ2VyTWVudS5xdWVyeVNlbGVjdG9yQWxsKCdhJykuZm9yRWFjaCgoYSwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgIT09IGhlYWRlckxpbmtzQ29weS5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYS5zdHlsZS53aWR0aCA9IGhlYWRlckxpbmtzQ29weVtpXS5vZmZzZXRXaWR0aCArICdweCdcclxuICAgICAgICAgICAgICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuY2hhbmdlUGFnZShlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKHByaW1hcnkpIHtcclxuXHJcbiAgICAgICAgY29uc3QgZGVza3RvcFByaW1hcnlXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tc2xpZGVyLWRlc2t0b3AnKVxyXG4gICAgICAgIGNvbnN0IGRlc2t0b3BQcmltYXJ5U2VjdGlvbnMgPSBkZXNrdG9wUHJpbWFyeVdyYXBwZXIucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb24tZGVza3RvcCcpXHJcbiAgICAgICAgY29uc3QgZGVza3RvcFByaW1hcnlJbm5lclNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmltYXJ5U3dpcGVyRGVza3RvcCcpXHJcbiAgICAgICAgZGVza3RvcFByaW1hcnlTZWN0aW9ucy5mb3JFYWNoKHNlY3Rpb24gPT4ge1xyXG4gICAgICAgICAgICBzZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaW5pdERlc2t0b3BJbm5lclNsaWRlcihzZWN0aW9uLmRhdGFzZXQub3JkZXIpXHJcbiAgICAgICAgICAgICAgICB1dGlscy5leHBhbmRQcmltYXJ5U2VjdGlvbk9uRGVza3RvcChzZWN0aW9uKVxyXG4gICAgICAgICAgICAgICAgc2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc2t0b3BQcmltYXJ5SW5uZXJTbGlkZXIuc3R5bGUudG9wID0gJzAnXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBkZXNrdG9wUHJpbWFyeUlubmVyU2xpZGVyLmNsYXNzTGlzdC5hZGQoJ3Nob3dlZCcpLCAzNTApXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLy8gc3dpdGNoIChzZWN0aW9uLmRhdGFzZXQubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIGNhc2UgJ2Fib3V0JzpcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgZGVza3RvcFByaW1hcnlXcmFwcGVyLnN0eWxlLnRyYW5zaXRpb24gPSAnYWxsIC4yNXMnXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNlY3Rpb24uc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgLjI1cydcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1kZXNrdG9wX19jb250ZW50Jykuc3R5bGUubGVmdCA9ICcwJ1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBkZXNrdG9wUHJpbWFyeVdyYXBwZXIuc3R5bGUubWFyZ2luTGVmdCA9ICctNjYuMjV2dyc7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNlY3Rpb24uc3R5bGUud2lkdGggPSAnMTAwdncnXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRlc2t0b3BQcmltYXJ5V3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgZGVza3RvcFByaW1hcnlJbm5lclNsaWRlci5zdHlsZS50b3AgPSAnMCdcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZGVza3RvcFByaW1hcnlJbm5lclNsaWRlci5jbGFzc0xpc3QuYWRkKCdzaG93ZWQnKSwgMzUwKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgY2FzZSAnaG9iYnknOlxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBkZXNrdG9wUHJpbWFyeVdyYXBwZXIuc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgLjE1cydcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2VjdGlvbi5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAuMzVzJ1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLWRlc2t0b3BfX2NvbnRlbnQnKS5zdHlsZS5sZWZ0ID0gJzAnXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tZGVza3RvcF9fY29udGVudCcpLnN0eWxlLnRyYW5zZm9ybSA9ICdub25lJ1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBkZXNrdG9wUHJpbWFyeVdyYXBwZXIuc3R5bGUubWFyZ2luTGVmdCA9ICctOTMuNzV2dyc7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNlY3Rpb24uc3R5bGUud2lkdGggPSAnMTAwdncnXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIC8vIGRlc2t0b3BQcmltYXJ5V3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAvLyAgICAgZGVza3RvcFByaW1hcnlJbm5lclNsaWRlci5zdHlsZS50b3AgPSAnMCdcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgLy8gICAgIHNldFRpbWVvdXQoKCkgPT4gZGVza3RvcFByaW1hcnlJbm5lclNsaWRlci5jbGFzc0xpc3QuYWRkKCdzaG93ZWQnKSwgMzUwKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgLy8gfSlcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgY2FzZSAncHJvamVjdHMnOlxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBkZXNrdG9wUHJpbWFyeVdyYXBwZXIuc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgLjE1cydcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2VjdGlvbi5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAuMzVzJ1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLW5hbWUnKS5zdHlsZS5sZWZ0ID0gJzAnXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRlc2t0b3BQcmltYXJ5V3JhcHBlci5zdHlsZS5tYXJnaW5MZWZ0ID0gJy0xMTEuMjV2dyc7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNlY3Rpb24uc3R5bGUud2lkdGggPSAnMTAwdncnXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRlc2t0b3BQcmltYXJ5V3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgZGVza3RvcFByaW1hcnlJbm5lclNsaWRlci5zdHlsZS50b3AgPSAnMCdcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZGVza3RvcFByaW1hcnlJbm5lclNsaWRlci5jbGFzc0xpc3QuYWRkKCdzaG93ZWQnKSwgMzUwKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgY2FzZSAnbWVkaWEnOlxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBkZXNrdG9wUHJpbWFyeVdyYXBwZXIuc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgLjI1cydcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2VjdGlvbi5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAuMjVzJ1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBkZXNrdG9wUHJpbWFyeVdyYXBwZXIuc3R5bGUubWFyZ2luTGVmdCA9ICctMTMzLjc1dncnO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBzZWN0aW9uLnN0eWxlLndpZHRoID0gJzEwMHZ3J1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBkZXNrdG9wUHJpbWFyeVdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGRlc2t0b3BQcmltYXJ5SW5uZXJTbGlkZXIuc3R5bGUudG9wID0gJzAnXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGRlc2t0b3BQcmltYXJ5SW5uZXJTbGlkZXIuY2xhc3NMaXN0LmFkZCgnc2hvd2VkJyksIDM1MClcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGNvbnN0ICRpbm5lclNsaWRlckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmlubmVyLXNlY3Rpb24tc2xpZGVyJylcclxuXHJcbiAgICAgICAgY29uc3QgcHJvamVjdHNTbGlkZXIgPSBuZXcgU3dpcGVyKCcucHJvamVjdHMtc2xpZGVyJywge1xyXG4gICAgICAgICAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcclxuICAgICAgICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMTUsXHJcbiAgICAgICAgICAgIHNjcm9sbGJhcjoge1xyXG4gICAgICAgICAgICAgICAgdmVydGljYWxDbGFzczogJ2Qtbm9uZSdcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8vIE5hdmlnYXRpb24gYXJyb3dzXHJcbiAgICAgICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgICAgIG5leHRFbDogJy5wcm9qZWN0cy1uZXh0JyxcclxuICAgICAgICAgICAgICAgIHByZXZFbDogJy5wcm9qZWN0cy1wcmV2JyxcclxuICAgICAgICAgICAgICAgIGxvY2tDbGFzczogJ2Qtbm9uZSdcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIG9uOiB7XHJcbiAgICAgICAgICAgICAgICAvLyBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2codGhpcylcclxuICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnNsaWRlcy5mb3JFYWNoKChzbGlkZSwgbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBzbGlkZS5zdHlsZS5vcGFjaXR5ID0gbiA+IDEgJiYgbiA8IDMgPyAnLjUnIDogbiA+IDIgJiYgbiA8IDQgPyAnLjI1JyA6ICcxJ1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIH0pXHJcbiAgICAgICAgICAgICAgICAvLyB9LFxyXG4gICAgICAgICAgICAgICAgLy8gYWN0aXZlSW5kZXhDaGFuZ2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGFjdGl2ZUluZGV4XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfSA9IHRoaXNcclxuICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnNsaWRlcy5mb3JFYWNoKChzbGlkZSwgbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBpZiAobiA8PSBhY3RpdmVJbmRleCB8fCBuID09PSBhY3RpdmVJbmRleCArIDEpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHNsaWRlLnN0eWxlLm9wYWNpdHkgPSAnMSdcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSBlbHNlIGlmIChuID09PSBhY3RpdmVJbmRleCArIDIpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHNsaWRlLnN0eWxlLm9wYWNpdHkgPSAnLjUnXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0gZWxzZSBpZiAobiA+IGFjdGl2ZUluZGV4ICsgMiAmJiBuIDwgYWN0aXZlSW5kZXggKyA0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBzbGlkZS5zdHlsZS5vcGFjaXR5ID0gJy4yNSdcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHNsaWRlLnN0eWxlLm9wYWNpdHkgPSAnMCdcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gICAgIH0pXHJcbiAgICAgICAgICAgICAgICAvLyB9LFxyXG4gICAgICAgICAgICAgICAgLy8gcmVhY2hFbmQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnNsaWRlcy5mb3JFYWNoKHNsaWRlID0+IHNsaWRlLnN0eWxlLm9wYWNpdHkgPSAnMScpXHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjb25zdCBpbml0SW5uZXJTbGlkZXIgPSAoaW5pdGlhbFNsaWRlUG9zaWl0b24pID0+IHtcclxuICAgICAgICAgICAgbmV3IFN3aXBlcignI2lubmVyUHJpbWFyeVNsaWRlcicsIHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IFwiYXV0b1wiLFxyXG4gICAgICAgICAgICAgICAgY2VudGVyZWRTbGlkZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxyXG4gICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGxvb3BlZFNsaWRlczogNCxcclxuICAgICAgICAgICAgICAgIGNlbnRlcmVkU2xpZGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGtleWJvYXJkOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBvbmx5SW5WaWV3cG9ydDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbml0aWFsU2xpZGU6IE51bWJlcihpbml0aWFsU2xpZGVQb3NpaXRvbiksXHJcbiAgICAgICAgICAgICAgICBvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlQ2hhbmdlOiBmdW5jdGlvbiAoc3dpcGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN3aXBlci5zbGlkZXNbc3dpcGVyLmFjdGl2ZUluZGV4XS5jaGlsZE5vZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN3aXBlci5zbGlkZXNbc3dpcGVyLmFjdGl2ZUluZGV4XS5jaGlsZE5vZGVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwcmltYXJ5U2xpZGVyID0gbmV3IFN3aXBlcihcIiNwcmltYXJ5U2xpZGVyXCIsIHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgIGNlbnRlcmVkU2xpZGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxyXG4gICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgICAgICBsb29wZWRTbGlkZXM6IDQsXHJcbiAgICAgICAgICAgIC8vIGtleWJvYXJkOiB7XHJcbiAgICAgICAgICAgIC8vICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyAgICAgb25seUluVmlld3BvcnQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAvLyB9LFxyXG4gICAgICAgICAgICBpbml0aWFsU2xpZGU6IDAsXHJcbiAgICAgICAgICAgIG9uOiB7XHJcbiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXMuZm9yRWFjaCgoc2xpZGUsIG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuc3R5bGUuekluZGV4ID0gdGhpcy5zbGlkZXMubGVuZ3RoIC0gblxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXNbdGhpcy5hY3RpdmVJbmRleF0uc3R5bGUuekluZGV4ID0gMTBcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKHN3aXBlciwgZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlID0gZS5wYXRoLmZpbmQoZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShlbC5jbGFzc0xpc3QpLmluY2x1ZGVzKCdzd2lwZXItc2xpZGUtYWN0aXZlJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLnN0eWxlLndpZHRoID0gJzEwMiUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLnN0eWxlLmJveFNoYWRvdyA9ICdub25lJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2lwZXIuZGlzYWJsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gc2xpZGUucXVlcnlTZWxlY3RvcignLnNlY3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdyYXBwZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHNlY3Rpb24uZGF0YXNldC5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWJvdXQnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVyID0gc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuaW5uZXItc2VjdGlvbi1zbGlkZXInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMycpLmluc2VydEFkamFjZW50RWxlbWVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWZ0ZXJiZWdpbicsICRpbm5lclNsaWRlckVsLmNsb25lTm9kZSh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbm5lclNsaWRlckVsLmlubmVySFRNTCA9ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0SW5uZXJTbGlkZXIoc2VjdGlvbi5kYXRhc2V0LmlubmVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuZXhwYW5kUHJpbWFyeVNlY3Rpb24oc2VjdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdob2JieSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncHJvamVjdHMnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ21lZGlhJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlciA9IHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTInKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdyYXBwZXIucXVlcnlTZWxlY3RvcignLmlubmVyLXNlY3Rpb24tc2xpZGVyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTInKS5pbnNlcnRBZGphY2VudEVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FmdGVyYmVnaW4nLCAkaW5uZXJTbGlkZXJFbC5jbG9uZU5vZGUodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW5uZXJTbGlkZXJFbC5pbm5lckhUTUwgPSAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdElubmVyU2xpZGVyKHNlY3Rpb24uZGF0YXNldC5pbm5lcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmV4cGFuZFByaW1hcnlTZWN0aW9uKHNlY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIC8vIGFjdGl2ZUluZGV4Q2hhbmdlOiBmdW5jdGlvbiAoc3dpcGVyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5zbGlkZXMuZm9yRWFjaCgoc2xpZGUsIG4pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgc2xpZGUuc3R5bGUud2lkdGggPSAnMjUlJ1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIH0pXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5zbGlkZXNbdGhpcy5hY3RpdmVJbmRleF0uc3R5bGUud2lkdGggPSAnNDAlJ1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgICAgIC8vICAgZWw6IFwiLnN3aXBlci1wYWdpbmF0aW9uXCIsXHJcbiAgICAgICAgICAgIC8vICAgY2xpY2thYmxlOiB0cnVlXHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIGluaXRJbm5lclNsaWRlcigpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHV0aWxzLiRlbCgnLmJsYWNrLXNsaWRlcicpKSB7XHJcbiAgICAgICAgbmV3IFN3aXBlcignLmJsYWNrLXNsaWRlcicsIHtcclxuICAgICAgICAgICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXHJcbiAgICAgICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjQsXHJcbiAgICAgICAgICAgIHNjcm9sbGJhcjoge1xyXG4gICAgICAgICAgICAgICAgdmVydGljYWxDbGFzczogJ2Qtbm9uZSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb246IHtcclxuICAgICAgICAgICAgICAgIGFmdGVySW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkZWxheSA9IDYwMFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVzLmZvckVhY2goKHNsaWRlLCBuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuc3R5bGUub3BhY2l0eSA9ICcxJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBkZWxheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXkgKz0gMjAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAga2V5Ym9hcmQ6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBvbmx5SW5WaWV3cG9ydDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW91c2V3aGVlbDogdHJ1ZSxcclxuICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgbmV4dEVsOiBgLmJsYWNrLXNsaWRlci1uZXh0YCxcclxuICAgICAgICAgICAgICAgIHByZXZFbDogYC5ibGFjay1zbGlkZXItcHJldmAsXHJcbiAgICAgICAgICAgICAgICBsb2NrQ2xhc3M6ICdkLW5vbmUnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAobmV3cykge1xyXG4gICAgICAgIGlzTWFya2VkICYmIGNsZWFySW50ZXJ2YWwobWVudUludGVydmFsKVxyXG4gICAgICAgIGxldCBkZWxheSA9IDIwMFxyXG4gICAgICAgIG5ld3MucXVlcnlTZWxlY3RvckFsbCgnLm5ld3MtaXRlbScpLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gaXRlbS5zdHlsZS5vcGFjaXR5ID0gMSwgZGVsYXkpXHJcbiAgICAgICAgICAgIGRlbGF5ICs9IDIwMFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIG5ldyBTd2lwZXIoJy5ob3Jpem9udGFsLWRlc2t0b3Atc2xpZGVyJywge1xyXG4gICAgICAgICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMCxcclxuICAgICAgICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAgICAgICA5OTY6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAzLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMzYsXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAga2V5Ym9hcmQ6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBvbmx5SW5WaWV3cG9ydDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW91c2V3aGVlbDogdHJ1ZSxcclxuICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgbmV4dEVsOiBgLnN3aXBlci1idXR0b24tbmV4dGAsXHJcbiAgICAgICAgICAgICAgICBwcmV2RWw6IGAuc3dpcGVyLWJ1dHRvbi1wcmV2YCxcclxuICAgICAgICAgICAgICAgIGxvY2tDbGFzczogJ2Qtbm9uZSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh1dGlscy4kZWwoJy5zaW5nbGUtcGFnZScpKSB7XHJcblxyXG4gICAgICAgIGluaXRWZXJ0aWNhbFNsaWRlcignLnNpbmdsZS1zbGlkZXInLCAnYXV0bycsIDMwKVxyXG4gICAgfVxyXG59KSJdfQ==
