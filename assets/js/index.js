document.addEventListener("DOMContentLoaded",(function(){const e={$el:e=>document.querySelector(e),setState:()=>{sessionStorage.setItem("state",JSON.stringify(e.$el(".index-main").innerHTML))},clearState:()=>{sessionStorage.removeItem("state")},initStateLinks:()=>{setTimeout(()=>{document.querySelectorAll(".state-link").forEach(t=>t.addEventListener("click",()=>{e.setState()}))},1e3)},isState:()=>!!sessionStorage.getItem("state"),isDesktop:()=>window.innerWidth>=996,expandPrimarySection:t=>{const s=e.$el(".section-slider"),i=s.querySelector('[data-name="about"]'),l=s.querySelector('[data-name="hobby"]'),n=s.querySelector('[data-name="projects"]'),o=s.querySelector('[data-name="media"]'),a=t.querySelector(`[data-position-${t.dataset.name}="outer"]`),r=t.querySelectorAll(`[data-position-${t.dataset.name}="inner"]`);switch(e.initStateLinks(),t.style.width="100%",t.dataset.name){case"about":l.style.left="100%",n.style.right="-50%",o.style.right="-70%",t.addEventListener("transitionend",(function(){t.querySelector(".slide-1").classList.add("slide-1__scrolled"),t.querySelector(".slide-3").classList.add("slide-3__scrolled")}));break;case"hobby":i.style.left="-25%",t.style.left=0,n.style.right="-25%",o.style.right="-50%",r.forEach(e=>e.style.display="none"),t.addEventListener("transitionend",(function(){t.querySelector(".slide-1").classList.add("slide-1__scrolled"),t.querySelector(".section-name").classList.add("section-name__scrolled"),t.querySelector(".slide-2").classList.add("slide-2__scrolled")})),t.addEventListener("animationend",(function(){a.style.display="none",r.forEach(e=>{e.style.display="block"})}));break;case"projects":i.style.left="-50%",l.style.left="-25%",t.style.right=0,o.style.right="-25%",r.forEach(e=>e.style.display="none"),t.addEventListener("transitionend",(function(){t.querySelector(".slide-2").classList.add("slide-2__scrolled"),t.querySelector(".section-name").classList.add("section-name__scrolled")})),t.addEventListener("animationend",(function(){a.style.display="none",r.forEach(e=>e.style.display="block")}));break;case"media":i.style.left="-75%",l.style.left="-50%",n.style.right="100%",t.addEventListener("transitionend",(function(){t.querySelector(".slide-1").classList.add("slide-1__scrolled"),t.querySelector(".slide-2").classList.add("slide-2__scrolled")})),t.querySelector(".slide-2").addEventListener("animationend",(function(){}))}sessionStorage.setItem("order",t.dataset.order)},expandPrimarySectionOnDesktop:t=>{const s=e.$el(".section-slider-desktop"),i=s.querySelector('[data-name="about"]'),l=s.querySelector('[data-name="hobby"]'),o=s.querySelector('[data-name="projects"]'),r=s.querySelector('[data-name="media"]');switch(a("#desktopVerticalTextSlider"),n(".hobbydesktop-","auto"),n(".projectsdesktop-","auto"),n(".mediadesktop-","auto"),t.style.width="95%",sessionStorage.setItem("order",t.dataset.order),t.dataset.name){case"about":t.querySelector(".section-desktop__content").style.right="calc(100% - 413px)",i.style.left="2.5%",l.style.left="97.5%",o.style.right="-25%",r.style.right="-90%";break;case"hobby":t.querySelector(".section-desktop__content").style.left="0px",i.style.left="-30%",l.style.left="2.5%",o.style.right="-10%",r.style.right="-40%";break;case"projects":t.querySelector(".section-name").style.left="0",i.style.left="-50%",l.style.left="-20%",o.style.right="2.5%",r.style.right="-30%";break;case"media":i.style.left="-60%",l.style.left="-30%",o.style.right="97.5%",r.style.right="2.5%"}e.initStateLinks()},changePage:t=>{t.preventDefault(),e.$el("main").classList.add("page-changing"),e.clearState(),setTimeout(()=>window.location.href=t.target.href,700)},checkIsActiveLink:e=>{e.classList.add("active"),e.previousElementSibling.classList.add("active-divider")}},t=document.getElementById("animationsPolygon"),s=document.getElementById("hamburgerSection"),i=e.$el(".primary"),l=e.$el(".news"),n=(e,t=2,s=15,i=!0)=>new Swiper(e,{direction:"vertical",loop:!0,slidesPerView:t,spaceBetween:Number(s),scrollbar:{verticalClass:"d-none"},on:{afterInit:function(){let e=500;this.slides.forEach((t,s)=>{setTimeout(()=>{t.style.opacity="1"},e),e+=200})}},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,navigation:{nextEl:e.slice(0,e.indexOf("-"))+"-next",prevEl:e.slice(0,e.indexOf("-"))+"-prev",lockClass:"d-none"}}),o=e=>{new Swiper(".primary-swiper-desktop",{slidesPerView:"auto",spaceBetween:0,loop:!0,loopedSlides:4,centeredSlides:!0,initialSlide:Number(e),keyboard:{enabled:!0,onlyInViewport:!0},on:{slideChange:function(){const{activeIndex:e}=this;sessionStorage.setItem("order",this.slides[e].dataset.swiperSlideIndex),this.slides.forEach((t,s)=>{s===e?t.querySelector(".active-content").classList.remove("active-content__inactive"):t.querySelector(".active-content").classList.add("active-content__inactive")})}}})},a=e=>new Swiper(e,{direction:"vertical",slidesPerView:"auto",freeMode:!0,scrollbar:{el:".swiper-scrollbar"},navigation:{nextEl:".vertical-text-next",prevEl:".vertical-text-prev ",lockClass:"d-none"},mousewheel:!0});let r=!1;const d=setInterval(()=>{s.querySelector(".active")&&e.$el(".hamburger__section__finally_opened")&&(e.checkIsActiveLink(e.$el(".active")),r=!0),r&&clearInterval(d)},100);t.insertAdjacentElement("afterbegin",s.cloneNode(!0)),t.querySelector("#hamburgerSection").id="";const c=t.querySelectorAll("a");if(c.forEach((e,t)=>{t!==c.length-1&&(e.style.width="auto",e.style.visibility="visible")}),e.$el(".desktop-links").querySelectorAll("a").forEach(t=>t.addEventListener("click",(function(t){e.changePage(t)}))),s.addEventListener("click",(function(t){s.classList.add("hamburger__section__opened"),s.addEventListener("animationend",()=>{s.classList.add("hamburger__section__finally_opened"),s.querySelectorAll("a").forEach((t,s)=>{s!==c.length-1&&(t.style.width=c[s].offsetWidth+"px",t.addEventListener("click",(function(t){e.changePage(t)})))})})})),i)if(e.isState())e.isDesktop()?(o(sessionStorage.getItem("order")),a("#desktopVerticalTextSlider"),n(".hobbydesktop-","auto"),n(".projectsdesktop-","auto"),n(".mediadesktop-","auto"),e.$el("main").style.opacity="1"):(new Swiper("#innerPrimarySlider",{slidesPerView:"auto",centeredSlides:!1,spaceBetween:0,loop:!0,loopedSlides:4,centeredSlides:!1,keyboard:{enabled:!0,onlyInViewport:!0},on:{slideChange:function(){const{activeIndex:e}=this;sessionStorage.setItem("test",this.slides[e].dataset.swiperSlideIndex)}},initialSlide:Number(sessionStorage.getItem("test"))}),a("#mobileVerticalTextSlider"),n(".projects-slider",2,15,!1),n(".hobby-slider",2,15,!1),n(".podcast-slider",2,15,!1),e.$el("main").style.transition="all .25s",setTimeout(()=>e.$el("main").style.opacity="1",1400)),e.initStateLinks(),e.clearState();else{e.$el("main").style.opacity="1";document.getElementById("primarySlider");const t=document.querySelectorAll(".section"),s=e.$el(".section-slider-desktop").querySelectorAll(".section-desktop"),i=document.getElementById("primarySwiperDesktop"),l=e.$el(".inner-section-slider");let r=!1;t.forEach(t=>{t.addEventListener("click",(function(s){if(!r){const s=t.querySelector(".slide-1").nextElementSibling;s.querySelector(".inner-section-slider")||(s.insertAdjacentElement("afterbegin",l.cloneNode(!0)),l.innerHTML=""),e.expandPrimarySection(t),r=!0,setTimeout(()=>{new Swiper("#innerPrimarySlider",{slidesPerView:"auto",centeredSlides:!1,spaceBetween:0,loop:!0,loopedSlides:4,centeredSlides:!1,keyboard:{enabled:!0,onlyInViewport:!0},on:{slideChange:function(){const{activeIndex:e}=this;sessionStorage.setItem("order",this.slides[e].dataset.swiperSlideIndex),sessionStorage.setItem("test",this.slides[e].dataset.swiperSlideIndex)}},initialSlide:Number(t.dataset.inner)})},400),setTimeout(()=>{a("#mobileVerticalTextSlider")},950),setTimeout(()=>{n(".hobby-slider",2,15,!1)},1450),setTimeout(()=>{n(".projects-slider",2,15,!1),n(".podcast-slider",2,15,!1)},1700)}}))}),s.forEach(t=>{t.addEventListener("click",(function(){o(t.dataset.order),e.expandPrimarySectionOnDesktop(t),t.addEventListener("transitionend",()=>{i.style.top="0",setTimeout(()=>{i.classList.add("showed")},350)})}))})}if(e.$el(".black-slider")&&new Swiper(".black-slider",{direction:"vertical",loop:!0,slidesPerView:2,spaceBetween:24,scrollbar:{verticalClass:"d-none"},on:{afterInit:function(){let e=600;this.slides.forEach((t,s)=>{setTimeout(()=>{t.style.opacity="1"},e),e+=200})}},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,navigation:{nextEl:".black-slider-next",prevEl:".black-slider-prev",lockClass:"d-none"},breakpoints:{996:{slidesPerView:2}}}),l){let e=200;l.querySelectorAll(".news-item").forEach(t=>{setTimeout(()=>t.style.opacity=1,e),e+=200}),window.addEventListener("load",()=>{new Swiper(".horizontal-desktop-slider",{direction:"vertical",slidesPerView:"auto",spaceBetween:10,loop:!1,breakpoints:{996:{slidesPerView:3,direction:"horizontal",spaceBetween:36}},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",lockClass:"d-none"}})})}e.$el(".single-page")&&new Swiper(".singlepagedesktop-",{direction:"vertical",loop:!0,slidesPerView:"auto",spaceBetween:15,scrollbar:{verticalClass:"d-none"},on:{afterInit:function(){let e=500;this.slides.forEach((t,s)=>{setTimeout(()=>{t.style.opacity="1"},e),e+=200})}},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,navigation:{nextEl:".singlepagedesktop-next",prevEl:".singlepagedesktop-prev",lockClass:"d-none"}})}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInV0aWxzIiwiJGVsIiwic2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yIiwic2V0U3RhdGUiLCJzZXNzaW9uU3RvcmFnZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJpbm5lckhUTUwiLCJjbGVhclN0YXRlIiwicmVtb3ZlSXRlbSIsImluaXRTdGF0ZUxpbmtzIiwic2V0VGltZW91dCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsaW5rIiwiaXNTdGF0ZSIsImdldEl0ZW0iLCJpc0Rlc2t0b3AiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiZXhwYW5kUHJpbWFyeVNlY3Rpb24iLCJzZWN0aW9uIiwicHJpbWFyeVdyYXBwZXIiLCJhYm91dCIsImhvYmJ5IiwicHJvamVjdHMiLCJtZWRpYSIsImlubmVyTmFtZSIsImRhdGFzZXQiLCJuYW1lIiwic3R5bGUiLCJ3aWR0aCIsImxlZnQiLCJyaWdodCIsImNsYXNzTGlzdCIsImFkZCIsImZvckVhY2giLCJkaXNwbGF5Iiwib3V0ZXJOYW1lIiwib3JkZXIiLCJleHBhbmRQcmltYXJ5U2VjdGlvbk9uRGVza3RvcCIsImRlc2t0b3BQcmltYXJ5V3JhcHBlciIsImluaXRWZXJ0aWNhbFNsaWRlciIsImluaXRWZXJ0aWNhbFRleHRTbGlkZXIiLCJlIiwibG9jYXRpb24iLCJocmVmIiwidGFyZ2V0IiwiY2hlY2tJc0FjdGl2ZUxpbmsiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiZ2V0RWxlbWVudEJ5SWQiLCJwcmltYXJ5Iiwic3BhY2VCZXR3ZWVuIiwiaXNOYXZpZ2F0aW9uIiwiU3dpcGVyIiwiYW5pbWF0aW9uc1BvbHlnb24iLCJoYW1idXJnZXJNZW51Iiwic2xpZGVzUGVyVmlldyIsIk51bWJlciIsInNjcm9sbGJhciIsIm9uIiwiYWZ0ZXJJbml0IiwiZGVsYXkiLCJ0aGlzIiwic2xpZGUiLCJuIiwib3BhY2l0eSIsImtleWJvYXJkIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInNsaWNlIiwiaW5kZXhPZiIsInByZXZFbCIsImxvY2tDbGFzcyIsImluaXRpYWxTbGlkZVBvc2lpdG9uIiwibG9vcCIsImxvb3BlZFNsaWRlcyIsImNlbnRlcmVkU2xpZGVzIiwiaW5pdGlhbFNsaWRlIiwiaW5pdERlc2t0b3BJbm5lclNsaWRlciIsImVuYWJsZWQiLCJhY3RpdmVJbmRleCIsInNsaWRlcyIsInN3aXBlclNsaWRlSW5kZXgiLCJvbmx5SW5WaWV3cG9ydCIsInJlbW92ZSIsImRpcmVjdGlvbiIsImZyZWVNb2RlIiwiZWwiLCJtb3VzZXdoZWVsIiwic2V0SW50ZXJ2YWwiLCJpc01hcmtlZCIsImNsZWFySW50ZXJ2YWwiLCJtZW51SW50ZXJ2YWwiLCJjbG9uZU5vZGUiLCJpZCIsImhlYWRlckxpbmtzQ29weSIsImEiLCJpIiwidmlzaWJpbGl0eSIsImNoYW5nZVBhZ2UiLCJsZW5ndGgiLCJvZmZzZXRXaWR0aCIsInNsaWRlQ2hhbmdlIiwidHJhbnNpdGlvbiIsImRlc2t0b3BQcmltYXJ5U2VjdGlvbnMiLCJkZXNrdG9wUHJpbWFyeUlubmVyU2xpZGVyIiwicHJpbWFyeVNsaWRlclNlY3Rpb24iLCIkaW5uZXJTbGlkZXJFbCIsImlzUHJpbWFyeUV4cGFuZGVkIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwidG9wIiwidmVydGljYWxDbGFzcyIsIjk5NiIsIm5ld3MiLCJpdGVtIiwiYnJlYWtwb2ludHMiXSwibWFwcGluZ3MiOiJBQUFBQSxTQUFTQyxpQkFBaUIsb0JBQW9CLFdBQzFDLE1BQU1DLEVBQVEsQ0FDUEMsSUFBR0MsR0FBYUosU0FBU0ssY0FBY0QsR0FDMUNFLFNBQVUsS0FDTkMsZUFBZUMsUUFBUSxRQUFjQyxLQUFBQSxVQUFnQk4sRUFBSUEsSUFBQSxlQUFlTyxhQUU1RUMsV0FBWSxLQUNSSixlQUFlSyxXQUFXLFVBRTlCQyxlQUFnQixLQUVaQyxXQUFpQixLQUNjZCxTQUFDZSxpQkFBaUIsZUFDMUJD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LHNCQUNDRyxPQUFBLHNCQUNBQyxVQUFBLGNBT3JCekUsRUFBTUMsSUFBSSxpQkFDVixJQUFBcUQsT0FBQSxzQkFBQSxDQUVJZ0MsVUFBQSxXQUNBQSxNQUFXLEVBQ0w3QixjQUh3QixPQUk5QkEsYUFBZSxHQUNmTCxVQUw4QixDQU1yQjZELGNBQUUsVUFObUJyRCxHQUFBLENBUzFCQyxVQUFBLFdBQ1csSUFBQUMsRUFBWSxJQUNWQyxLQUFUbUIsT0FBQTlDLFFBQUEsQ0FBQTRCLEVBQUFDLEtBQ1k3QixXQUFTNEIsS0FDTkEsRUFBTWxDLE1BQUFvQyxRQUFBLEtBQ0RBLEdBRGhCSixHQUFBLFFBYmtCSyxTQUFBLENBb0JwQmEsU0FBQSxFQUNDSSxnQkFERCxHQXBCb0JLLFlBQUEsRUF5QjlCckIsV0FBQSxDQUNVQyxPQUFFLDBCQUNDRyxPQUFBLDBCQUNBQyxVQUFBIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHV0aWxzID0ge1xyXG4gICAgICAgICRlbDogKHNlbGVjdG9yKSA9PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSxcclxuICAgICAgICBzZXRTdGF0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdzdGF0ZScsIEpTT04uc3RyaW5naWZ5KHV0aWxzLiRlbCgnLmluZGV4LW1haW4nKS5pbm5lckhUTUwpKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xlYXJTdGF0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdzdGF0ZScpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbml0U3RhdGVMaW5rczogKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyDQodGB0YvQu9C60LgsINC/0YDQuCDQutC70LjQutC1INC90LAg0LrQvtGC0L7RgNGL0YUg0YHQvtGF0YDQsNC90Y/QtdGC0YHRjyDRgdC+0YHRgtC+0Y/QvdC40LUg0YTRgNC+0L3RgtCwINC90LAg0LPQu9Cw0LLQvdC+0Lkg0YHRgtGA0LDQvdC40YbQtVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhdGUtbGluaycpXHJcbiAgICAgICAgICAgICAgICBzdGF0ZUxpbmtzLmZvckVhY2gobGluayA9PiBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHV0aWxzLnNldFN0YXRlKClcclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICB9LCAxMDAwKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXNTdGF0ZTogKCkgPT4gISFzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdzdGF0ZScpLFxyXG4gICAgICAgIGlzRGVza3RvcDogKCkgPT4gd2luZG93LmlubmVyV2lkdGggPj0gOTk2LFxyXG4gICAgICAgIGV4cGFuZFByaW1hcnlTZWN0aW9uOiAoc2VjdGlvbikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcmltYXJ5V3JhcHBlciA9IHV0aWxzLiRlbCgnLnNlY3Rpb24tc2xpZGVyJylcclxuICAgICAgICAgICAgY29uc3QgYWJvdXQgPSBwcmltYXJ5V3JhcHBlci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1uYW1lPVwiYWJvdXRcIl0nKVxyXG4gICAgICAgICAgICBjb25zdCBob2JieSA9IHByaW1hcnlXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW5hbWU9XCJob2JieVwiXScpXHJcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RzID0gcHJpbWFyeVdyYXBwZXIucXVlcnlTZWxlY3RvcignW2RhdGEtbmFtZT1cInByb2plY3RzXCJdJylcclxuICAgICAgICAgICAgY29uc3QgbWVkaWEgPSBwcmltYXJ5V3JhcHBlci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1uYW1lPVwibWVkaWFcIl0nKVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgb3V0ZXJOYW1lID0gc2VjdGlvbi5xdWVyeVNlbGVjdG9yKGBbZGF0YS1wb3NpdGlvbi0ke3NlY3Rpb24uZGF0YXNldC5uYW1lfT1cIm91dGVyXCJdYClcclxuICAgICAgICAgICAgY29uc3QgaW5uZXJOYW1lID0gc2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKGBbZGF0YS1wb3NpdGlvbi0ke3NlY3Rpb24uZGF0YXNldC5uYW1lfT1cImlubmVyXCJdYClcclxuICAgICAgICAgICAgdXRpbHMuaW5pdFN0YXRlTGlua3MoKVxyXG4gICAgICAgICAgICBzZWN0aW9uLnN0eWxlLndpZHRoID0gJzEwMCUnXHJcbiAgICAgICAgICAgIHN3aXRjaCAoc2VjdGlvbi5kYXRhc2V0Lm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2Fib3V0JzpcclxuICAgICAgICAgICAgICAgICAgICBob2JieS5zdHlsZS5sZWZ0ID0gJzEwMCUnXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHMuc3R5bGUucmlnaHQgPSAnLTUwJSdcclxuICAgICAgICAgICAgICAgICAgICBtZWRpYS5zdHlsZS5yaWdodCA9ICctNzAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMScpLmNsYXNzTGlzdC5hZGQoJ3NsaWRlLTFfX3Njcm9sbGVkJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMycpLmNsYXNzTGlzdC5hZGQoJ3NsaWRlLTNfX3Njcm9sbGVkJylcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnaG9iYnknOlxyXG4gICAgICAgICAgICAgICAgICAgIGFib3V0LnN0eWxlLmxlZnQgPSAnLTI1JSdcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnN0eWxlLmxlZnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RzLnN0eWxlLnJpZ2h0ID0gJy0yNSUnXHJcbiAgICAgICAgICAgICAgICAgICAgbWVkaWEuc3R5bGUucmlnaHQgPSAnLTUwJSdcclxuICAgICAgICAgICAgICAgICAgICBpbm5lck5hbWUuZm9yRWFjaChuYW1lID0+IG5hbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJylcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTEnKS5jbGFzc0xpc3QuYWRkKCdzbGlkZS0xX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tbmFtZScpLmNsYXNzTGlzdC5hZGQoJ3NlY3Rpb24tbmFtZV9fc2Nyb2xsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZS0yJykuY2xhc3NMaXN0LmFkZCgnc2xpZGUtMl9fc2Nyb2xsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dGVyTmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyTmFtZS5mb3JFYWNoKG5hbWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdwcm9qZWN0cyc6XHJcbiAgICAgICAgICAgICAgICAgICAgYWJvdXQuc3R5bGUubGVmdCA9ICctNTAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGhvYmJ5LnN0eWxlLmxlZnQgPSAnLTI1JSc7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5zdHlsZS5yaWdodCA9IDBcclxuICAgICAgICAgICAgICAgICAgICBtZWRpYS5zdHlsZS5yaWdodCA9ICctMjUlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGlubmVyTmFtZS5mb3JFYWNoKG5hbWUgPT4gbmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMicpLmNsYXNzTGlzdC5hZGQoJ3NsaWRlLTJfX3Njcm9sbGVkJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1uYW1lJykuY2xhc3NMaXN0LmFkZCgnc2VjdGlvbi1uYW1lX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0ZXJOYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJOYW1lLmZvckVhY2gobmFtZSA9PiBuYW1lLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdtZWRpYSc6XHJcbiAgICAgICAgICAgICAgICAgICAgYWJvdXQuc3R5bGUubGVmdCA9ICctNzUlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGhvYmJ5LnN0eWxlLmxlZnQgPSAnLTUwJSc7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHMuc3R5bGUucmlnaHQgPSAnMTAwJSdcclxuICAgICAgICAgICAgICAgICAgICAvLyBtZWRpYS5zdHlsZS5yaWdodCA9ICctMTAwJSdcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTEnKS5jbGFzc0xpc3QuYWRkKCdzbGlkZS0xX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTInKS5jbGFzc0xpc3QuYWRkKCdzbGlkZS0yX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZS0yJykuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge30pXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnb3JkZXInLCBzZWN0aW9uLmRhdGFzZXQub3JkZXIpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBleHBhbmRQcmltYXJ5U2VjdGlvbk9uRGVza3RvcDogKHNlY3Rpb24pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGVza3RvcFByaW1hcnlXcmFwcGVyID0gdXRpbHMuJGVsKCcuc2VjdGlvbi1zbGlkZXItZGVza3RvcCcpXHJcbiAgICAgICAgICAgIGNvbnN0IGFib3V0ID0gZGVza3RvcFByaW1hcnlXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW5hbWU9XCJhYm91dFwiXScpXHJcbiAgICAgICAgICAgIGNvbnN0IGhvYmJ5ID0gZGVza3RvcFByaW1hcnlXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW5hbWU9XCJob2JieVwiXScpXHJcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RzID0gZGVza3RvcFByaW1hcnlXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW5hbWU9XCJwcm9qZWN0c1wiXScpXHJcbiAgICAgICAgICAgIGNvbnN0IG1lZGlhID0gZGVza3RvcFByaW1hcnlXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW5hbWU9XCJtZWRpYVwiXScpXHJcbiAgICAgICAgICAgIGluaXRWZXJ0aWNhbFRleHRTbGlkZXIoJyNkZXNrdG9wVmVydGljYWxUZXh0U2xpZGVyJylcclxuICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcuaG9iYnlkZXNrdG9wLScsICdhdXRvJylcclxuICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcucHJvamVjdHNkZXNrdG9wLScsICdhdXRvJylcclxuICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcubWVkaWFkZXNrdG9wLScsICdhdXRvJylcclxuICAgICAgICAgICAgc2VjdGlvbi5zdHlsZS53aWR0aCA9ICc5NSUnXHJcbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ29yZGVyJywgc2VjdGlvbi5kYXRhc2V0Lm9yZGVyKVxyXG4gICAgICAgICAgICBzd2l0Y2ggKHNlY3Rpb24uZGF0YXNldC5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdhYm91dCc6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1kZXNrdG9wX19jb250ZW50Jykuc3R5bGUucmlnaHQgPSAnY2FsYygxMDAlIC0gNDEzcHgpJ1xyXG4gICAgICAgICAgICAgICAgICAgIGFib3V0LnN0eWxlLmxlZnQgPSAnMi41JSdcclxuICAgICAgICAgICAgICAgICAgICBob2JieS5zdHlsZS5sZWZ0ID0gJzk3LjUlJ1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RzLnN0eWxlLnJpZ2h0ID0gJy0yNSUnXHJcbiAgICAgICAgICAgICAgICAgICAgbWVkaWEuc3R5bGUucmlnaHQgPSAnLTkwJSdcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2hvYmJ5JzpcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLWRlc2t0b3BfX2NvbnRlbnQnKS5zdHlsZS5sZWZ0ID0gJzBweCdcclxuICAgICAgICAgICAgICAgICAgICBhYm91dC5zdHlsZS5sZWZ0ID0gJy0zMCUnXHJcbiAgICAgICAgICAgICAgICAgICAgaG9iYnkuc3R5bGUubGVmdCA9ICcyLjUlJ1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RzLnN0eWxlLnJpZ2h0ID0gJy0xMCUnXHJcbiAgICAgICAgICAgICAgICAgICAgbWVkaWEuc3R5bGUucmlnaHQgPSAnLTQwJSdcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3Byb2plY3RzJzpcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLW5hbWUnKS5zdHlsZS5sZWZ0ID0gJzAnXHJcbiAgICAgICAgICAgICAgICAgICAgYWJvdXQuc3R5bGUubGVmdCA9ICctNTAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGhvYmJ5LnN0eWxlLmxlZnQgPSAnLTIwJSdcclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0cy5zdHlsZS5yaWdodCA9ICcyLjUlJ1xyXG4gICAgICAgICAgICAgICAgICAgIG1lZGlhLnN0eWxlLnJpZ2h0ID0gJy0zMCUnXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdtZWRpYSc6XHJcbiAgICAgICAgICAgICAgICAgICAgYWJvdXQuc3R5bGUubGVmdCA9ICctNjAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGhvYmJ5LnN0eWxlLmxlZnQgPSAnLTMwJSdcclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0cy5zdHlsZS5yaWdodCA9ICc5Ny41JSdcclxuICAgICAgICAgICAgICAgICAgICBtZWRpYS5zdHlsZS5yaWdodCA9ICcyLjUlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHV0aWxzLmluaXRTdGF0ZUxpbmtzKClcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoYW5nZVBhZ2U6IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICB1dGlscy4kZWwoJ21haW4nKS5jbGFzc0xpc3QuYWRkKCdwYWdlLWNoYW5naW5nJylcclxuICAgICAgICAgICAgdXRpbHMuY2xlYXJTdGF0ZSgpXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gd2luZG93LmxvY2F0aW9uLmhyZWYgPSBlLnRhcmdldC5ocmVmLCA3MDApXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGVja0lzQWN0aXZlTGluazogKGxpbmspID0+IHtcclxuICAgICAgICAgICAgbGluay5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG4gICAgICAgICAgICBsaW5rLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLWRpdmlkZXInKVxyXG4gICAgICAgIH0sXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYW5pbWF0aW9uc1BvbHlnb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5pbWF0aW9uc1BvbHlnb24nKVxyXG4gICAgY29uc3QgaGFtYnVyZ2VyTWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoYW1idXJnZXJTZWN0aW9uJylcclxuICAgIGNvbnN0IHByaW1hcnkgPSB1dGlscy4kZWwoJy5wcmltYXJ5JylcclxuICAgIGNvbnN0IG5ld3MgPSB1dGlscy4kZWwoJy5uZXdzJylcclxuXHJcbiAgICBjb25zdCBpbml0VmVydGljYWxTbGlkZXIgPSAoJGVsLCBzbGlkZXNQZXJWaWV3ID0gMiwgc3BhY2VCZXR3ZWVuID0gMTUsIGlzTmF2aWdhdGlvbiA9IHRydWUpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFN3aXBlcigkZWwsIHtcclxuICAgICAgICAgICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXHJcbiAgICAgICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IHNsaWRlc1BlclZpZXcsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogTnVtYmVyKHNwYWNlQmV0d2VlbiksXHJcbiAgICAgICAgICAgIHNjcm9sbGJhcjoge1xyXG4gICAgICAgICAgICAgICAgdmVydGljYWxDbGFzczogJ2Qtbm9uZSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb246IHtcclxuICAgICAgICAgICAgICAgIGFmdGVySW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkZWxheSA9IDUwMFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVzLmZvckVhY2goKHNsaWRlLCBuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuc3R5bGUub3BhY2l0eSA9ICcxJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBkZWxheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXkgKz0gMjAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAga2V5Ym9hcmQ6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBvbmx5SW5WaWV3cG9ydDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW91c2V3aGVlbDogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gTmF2aWdhdGlvbiBhcnJvd3NcclxuICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgbmV4dEVsOiBgJHskZWwuc2xpY2UoMCwgJGVsLmluZGV4T2YoJy0nKSl9LW5leHRgLFxyXG4gICAgICAgICAgICAgICAgcHJldkVsOiBgJHskZWwuc2xpY2UoMCwgJGVsLmluZGV4T2YoJy0nKSl9LXByZXZgLFxyXG4gICAgICAgICAgICAgICAgbG9ja0NsYXNzOiAnZC1ub25lJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGluaXREZXNrdG9wSW5uZXJTbGlkZXIgPSAoaW5pdGlhbFNsaWRlUG9zaWl0b24pID0+IHtcclxuICAgICAgICBuZXcgU3dpcGVyKCcucHJpbWFyeS1zd2lwZXItZGVza3RvcCcsIHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgbG9vcGVkU2xpZGVzOiA0LFxyXG4gICAgICAgICAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcclxuICAgICAgICAgICAgaW5pdGlhbFNsaWRlOiBOdW1iZXIoaW5pdGlhbFNsaWRlUG9zaWl0b24pLFxyXG4gICAgICAgICAgICBrZXlib2FyZDoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG9ubHlJblZpZXdwb3J0OiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbjoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVDaGFuZ2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgfSA9IHRoaXNcclxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdvcmRlcicsIHRoaXMuc2xpZGVzW2FjdGl2ZUluZGV4XS5kYXRhc2V0LnN3aXBlclNsaWRlSW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXMuZm9yRWFjaCgoc2xpZGUsIG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPT09IGFjdGl2ZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlLWNvbnRlbnQnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtY29udGVudF9faW5hY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2xpZGUucXVlcnlTZWxlY3RvcignLmluYWN0aXZlLWNvbnRlbnQnKS5zdHlsZS5vcGFjaXR5ID0gJzAnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlLWNvbnRlbnQnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtY29udGVudF9faW5hY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpbml0VmVydGljYWxUZXh0U2xpZGVyID0gKCRlbCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgU3dpcGVyKCRlbCwge1xyXG4gICAgICAgICAgICBkaXJlY3Rpb246IFwidmVydGljYWxcIixcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgIGZyZWVNb2RlOiB0cnVlLFxyXG4gICAgICAgICAgICBzY3JvbGxiYXI6IHtcclxuICAgICAgICAgICAgICAgIGVsOiBcIi5zd2lwZXItc2Nyb2xsYmFyXCIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgICAgIG5leHRFbDogYC52ZXJ0aWNhbC10ZXh0LW5leHRgLFxyXG4gICAgICAgICAgICAgICAgcHJldkVsOiBgLnZlcnRpY2FsLXRleHQtcHJldiBgLFxyXG4gICAgICAgICAgICAgICAgbG9ja0NsYXNzOiAnZC1ub25lJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtb3VzZXdoZWVsOiB0cnVlLFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGlzTWFya2VkID0gZmFsc2U7XHJcbiAgICBjb25zdCBtZW51SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKGhhbWJ1cmdlck1lbnUucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpICYmIHV0aWxzLiRlbCgnLmhhbWJ1cmdlcl9fc2VjdGlvbl9fZmluYWxseV9vcGVuZWQnKSkge1xyXG4gICAgICAgICAgICB1dGlscy5jaGVja0lzQWN0aXZlTGluayh1dGlscy4kZWwoJy5hY3RpdmUnKSlcclxuICAgICAgICAgICAgaXNNYXJrZWQgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlzTWFya2VkICYmIGNsZWFySW50ZXJ2YWwobWVudUludGVydmFsKVxyXG4gICAgfSwgMTAwKVxyXG5cclxuICAgIC8vINCa0LvQvtC90LjRgNGD0LXQvCDRiNCw0L/QutGDLCDRh9GC0L7QsdGLINCy0YvRh9C40YHQu9C40YLRjCDQtNC70LjQvdGDINC/0YPQvdC60YLQvtCyINC80LXQvdGOINC00LvRjyDQuNGFINC/0LvQsNCy0L3QvtC5INCw0L3QuNC80LDRhtC40LhcclxuICAgIGFuaW1hdGlvbnNQb2x5Z29uLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJiZWdpbicsIGhhbWJ1cmdlck1lbnUuY2xvbmVOb2RlKHRydWUpKVxyXG4gICAgYW5pbWF0aW9uc1BvbHlnb24ucXVlcnlTZWxlY3RvcignI2hhbWJ1cmdlclNlY3Rpb24nKS5pZCA9ICcnXHJcbiAgICBjb25zdCBoZWFkZXJMaW5rc0NvcHkgPSBhbmltYXRpb25zUG9seWdvbi5xdWVyeVNlbGVjdG9yQWxsKCdhJylcclxuICAgIGhlYWRlckxpbmtzQ29weS5mb3JFYWNoKChhLCBpKSA9PiB7XHJcbiAgICAgICAgaWYgKGkgIT09IGhlYWRlckxpbmtzQ29weS5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgIGEuc3R5bGUud2lkdGggPSAnYXV0bydcclxuICAgICAgICAgICAgYS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICB1dGlscy4kZWwoJy5kZXNrdG9wLWxpbmtzJykucXVlcnlTZWxlY3RvckFsbCgnYScpLmZvckVhY2goYSA9PiBhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB1dGlscy5jaGFuZ2VQYWdlKGUpXHJcbiAgICB9KSlcclxuXHJcbiAgICBoYW1idXJnZXJNZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBoYW1idXJnZXJNZW51LmNsYXNzTGlzdC5hZGQoJ2hhbWJ1cmdlcl9fc2VjdGlvbl9fb3BlbmVkJylcclxuICAgICAgICBoYW1idXJnZXJNZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgaGFtYnVyZ2VyTWVudS5jbGFzc0xpc3QuYWRkKCdoYW1idXJnZXJfX3NlY3Rpb25fX2ZpbmFsbHlfb3BlbmVkJylcclxuICAgICAgICAgICAgaGFtYnVyZ2VyTWVudS5xdWVyeVNlbGVjdG9yQWxsKCdhJykuZm9yRWFjaCgoYSwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgIT09IGhlYWRlckxpbmtzQ29weS5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYS5zdHlsZS53aWR0aCA9IGhlYWRlckxpbmtzQ29weVtpXS5vZmZzZXRXaWR0aCArICdweCdcclxuICAgICAgICAgICAgICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuY2hhbmdlUGFnZShlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgLy8g0JXRgdC70Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINC90LAg0LPQu9Cw0LLQvdC+0LlcclxuICAgIGlmIChwcmltYXJ5KSB7XHJcbiAgICAgICAgaWYgKHV0aWxzLmlzU3RhdGUoKSkge1xyXG4gICAgICAgICAgICBpZiAodXRpbHMuaXNEZXNrdG9wKCkpIHtcclxuICAgICAgICAgICAgICAgIGluaXREZXNrdG9wSW5uZXJTbGlkZXIoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnb3JkZXInKSlcclxuICAgICAgICAgICAgICAgIGluaXRWZXJ0aWNhbFRleHRTbGlkZXIoJyNkZXNrdG9wVmVydGljYWxUZXh0U2xpZGVyJylcclxuICAgICAgICAgICAgICAgIGluaXRWZXJ0aWNhbFNsaWRlcignLmhvYmJ5ZGVza3RvcC0nLCAnYXV0bycpXHJcbiAgICAgICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5wcm9qZWN0c2Rlc2t0b3AtJywgJ2F1dG8nKVxyXG4gICAgICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcubWVkaWFkZXNrdG9wLScsICdhdXRvJylcclxuICAgICAgICAgICAgICAgIHV0aWxzLiRlbCgnbWFpbicpLnN0eWxlLm9wYWNpdHkgPSAnMSdcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ldyBTd2lwZXIoJyNpbm5lclByaW1hcnlTbGlkZXInLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyZWRTbGlkZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuICAgICAgICAgICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvb3BlZFNsaWRlczogNCxcclxuICAgICAgICAgICAgICAgICAgICBjZW50ZXJlZFNsaWRlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25seUluVmlld3BvcnQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUNoYW5nZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ID0gdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndGVzdCcsIHRoaXMuc2xpZGVzW2FjdGl2ZUluZGV4XS5kYXRhc2V0LnN3aXBlclNsaWRlSW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsU2xpZGU6IE51bWJlcihzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd0ZXN0JykpLFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGluaXRWZXJ0aWNhbFRleHRTbGlkZXIoJyNtb2JpbGVWZXJ0aWNhbFRleHRTbGlkZXInKVxyXG4gICAgICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcucHJvamVjdHMtc2xpZGVyJywgMiwgMTUsIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcuaG9iYnktc2xpZGVyJywgMiwgMTUsIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcucG9kY2FzdC1zbGlkZXInLCAyLCAxNSwgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICB1dGlscy4kZWwoJ21haW4nKS5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAuMjVzJ1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB1dGlscy4kZWwoJ21haW4nKS5zdHlsZS5vcGFjaXR5ID0gJzEnLCAxNDAwKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHV0aWxzLmluaXRTdGF0ZUxpbmtzKClcclxuICAgICAgICAgICAgdXRpbHMuY2xlYXJTdGF0ZSgpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdXRpbHMuJGVsKCdtYWluJykuc3R5bGUub3BhY2l0eSA9ICcxJ1xyXG4gICAgICAgICAgICBjb25zdCBwcmltYXJ5U2xpZGVyU2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmltYXJ5U2xpZGVyJylcclxuICAgICAgICAgICAgY29uc3QgcHJpbWFyeVNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb24nKVxyXG4gICAgICAgICAgICBjb25zdCBkZXNrdG9wUHJpbWFyeVdyYXBwZXIgPSB1dGlscy4kZWwoJy5zZWN0aW9uLXNsaWRlci1kZXNrdG9wJylcclxuICAgICAgICAgICAgY29uc3QgZGVza3RvcFByaW1hcnlTZWN0aW9ucyA9IGRlc2t0b3BQcmltYXJ5V3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbi1kZXNrdG9wJylcclxuICAgICAgICAgICAgY29uc3QgZGVza3RvcFByaW1hcnlJbm5lclNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmltYXJ5U3dpcGVyRGVza3RvcCcpXHJcbiAgICAgICAgICAgIGNvbnN0ICRpbm5lclNsaWRlckVsID0gdXRpbHMuJGVsKCcuaW5uZXItc2VjdGlvbi1zbGlkZXInKVxyXG5cclxuICAgICAgICAgICAgbGV0IGlzUHJpbWFyeUV4cGFuZGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyDQntCx0YDQsNCx0LDRgtGL0LLQsNC10Lwg0LrQu9C40Log0L3QsCDQs9C70LDQstC90L7QuSDQsiDQvNC+0LHQuNC70YzQvdC+0Lkg0LLQtdGA0YHQuNC4XHJcbiAgICAgICAgICAgIHByaW1hcnlTZWN0aW9ucy5mb3JFYWNoKHNlY3Rpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1ByaW1hcnlFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMScpLm5leHRFbGVtZW50U2libGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdyYXBwZXIucXVlcnlTZWxlY3RvcignLmlubmVyLXNlY3Rpb24tc2xpZGVyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhZnRlcmJlZ2luJywgJGlubmVyU2xpZGVyRWwuY2xvbmVOb2RlKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlubmVyU2xpZGVyRWwuaW5uZXJIVE1MID0gJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5leHBhbmRQcmltYXJ5U2VjdGlvbihzZWN0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1ByaW1hcnlFeHBhbmRlZCA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3dpcGVyKCcjaW5uZXJQcmltYXJ5U2xpZGVyJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IFwiYXV0b1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcmVkU2xpZGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29wZWRTbGlkZXM6IDQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyZWRTbGlkZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleWJvYXJkOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubHlJblZpZXdwb3J0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVDaGFuZ2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVJbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA9IHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ29yZGVyJywgdGhpcy5zbGlkZXNbYWN0aXZlSW5kZXhdLmRhdGFzZXQuc3dpcGVyU2xpZGVJbmRleClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3Rlc3QnLCB0aGlzLnNsaWRlc1thY3RpdmVJbmRleF0uZGF0YXNldC5zd2lwZXJTbGlkZUluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFNsaWRlOiBOdW1iZXIoc2VjdGlvbi5kYXRhc2V0LmlubmVyKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDQwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0VmVydGljYWxUZXh0U2xpZGVyKCcjbW9iaWxlVmVydGljYWxUZXh0U2xpZGVyJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgOTUwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRWZXJ0aWNhbFNsaWRlcignLmhvYmJ5LXNsaWRlcicsIDIsIDE1LCBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTQ1MClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBpbml0VmVydGljYWxUZXh0U2xpZGVyKCcjbW9iaWxlVmVydGljYWxUZXh0U2xpZGVyJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGluaXRWZXJ0aWNhbFNsaWRlcignLmhvYmJ5LXNsaWRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0sIDE3MDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcucHJvamVjdHMtc2xpZGVyJywgMiwgMTUsIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcucG9kY2FzdC1zbGlkZXInLCAyLCAxNSwgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDE3MDApXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC8vINCe0LHRgNCw0LHQsNGC0YvQstCw0LXQvCDQutC70LjQuiDQvdCwINCz0LvQsNCy0L3QvtC5INCyINC00LXRgdC60YLQvtC/0L3QvtC5INCy0LXRgNGB0LjQuFxyXG4gICAgICAgICAgICBkZXNrdG9wUHJpbWFyeVNlY3Rpb25zLmZvckVhY2goc2VjdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXREZXNrdG9wSW5uZXJTbGlkZXIoc2VjdGlvbi5kYXRhc2V0Lm9yZGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHV0aWxzLmV4cGFuZFByaW1hcnlTZWN0aW9uT25EZXNrdG9wKHNlY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNrdG9wUHJpbWFyeUlubmVyU2xpZGVyLnN0eWxlLnRvcCA9ICcwJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2t0b3BQcmltYXJ5SW5uZXJTbGlkZXIuY2xhc3NMaXN0LmFkZCgnc2hvd2VkJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzUwKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodXRpbHMuJGVsKCcuYmxhY2stc2xpZGVyJykpIHtcclxuICAgICAgICBuZXcgU3dpcGVyKCcuYmxhY2stc2xpZGVyJywge1xyXG4gICAgICAgICAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcclxuICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyNCxcclxuICAgICAgICAgICAgc2Nyb2xsYmFyOiB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbENsYXNzOiAnZC1ub25lJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbjoge1xyXG4gICAgICAgICAgICAgICAgYWZ0ZXJJbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRlbGF5ID0gNjAwXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXMuZm9yRWFjaCgoc2xpZGUsIG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5zdHlsZS5vcGFjaXR5ID0gJzEnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGRlbGF5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxheSArPSAyMDBcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBrZXlib2FyZDoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG9ubHlJblZpZXdwb3J0OiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtb3VzZXdoZWVsOiB0cnVlLFxyXG4gICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICBuZXh0RWw6IGAuYmxhY2stc2xpZGVyLW5leHRgLFxyXG4gICAgICAgICAgICAgICAgcHJldkVsOiBgLmJsYWNrLXNsaWRlci1wcmV2YCxcclxuICAgICAgICAgICAgICAgIGxvY2tDbGFzczogJ2Qtbm9uZSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICAgICAgICAgIDk5Njoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAobmV3cykge1xyXG4gICAgICAgIGxldCBkZWxheSA9IDIwMFxyXG4gICAgICAgIG5ld3MucXVlcnlTZWxlY3RvckFsbCgnLm5ld3MtaXRlbScpLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gaXRlbS5zdHlsZS5vcGFjaXR5ID0gMSwgZGVsYXkpXHJcbiAgICAgICAgICAgIGRlbGF5ICs9IDIwMFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgU3dpcGVyKCcuaG9yaXpvbnRhbC1kZXNrdG9wLXNsaWRlcicsIHtcclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMTAsXHJcbiAgICAgICAgICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgOTk2OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDM2LFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBrZXlib2FyZDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgb25seUluVmlld3BvcnQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbW91c2V3aGVlbDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0RWw6IGAuc3dpcGVyLWJ1dHRvbi1uZXh0YCxcclxuICAgICAgICAgICAgICAgICAgICBwcmV2RWw6IGAuc3dpcGVyLWJ1dHRvbi1wcmV2YCxcclxuICAgICAgICAgICAgICAgICAgICBsb2NrQ2xhc3M6ICdkLW5vbmUnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHV0aWxzLiRlbCgnLnNpbmdsZS1wYWdlJykpIHtcclxuICAgICAgICAvLyBpbml0VmVydGljYWxTbGlkZXIoJy5zaW5nbGVwYWdlZGVza3RvcC0nLCAnYXV0bycpXHJcbiAgICAgICAgbmV3IFN3aXBlcignLnNpbmdsZXBhZ2VkZXNrdG9wLScsIHtcclxuICAgICAgICAgICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXHJcbiAgICAgICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAxNSxcclxuICAgICAgICAgICAgc2Nyb2xsYmFyOiB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbENsYXNzOiAnZC1ub25lJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbjoge1xyXG4gICAgICAgICAgICAgICAgYWZ0ZXJJbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRlbGF5ID0gNTAwXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXMuZm9yRWFjaCgoc2xpZGUsIG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5zdHlsZS5vcGFjaXR5ID0gJzEnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGRlbGF5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxheSArPSAyMDBcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAga2V5Ym9hcmQ6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBvbmx5SW5WaWV3cG9ydDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW91c2V3aGVlbDogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gTmF2aWdhdGlvbiBhcnJvd3NcclxuICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgbmV4dEVsOiBgLnNpbmdsZXBhZ2VkZXNrdG9wLW5leHRgLFxyXG4gICAgICAgICAgICAgICAgcHJldkVsOiBgLnNpbmdsZXBhZ2VkZXNrdG9wLXByZXZgLFxyXG4gICAgICAgICAgICAgICAgbG9ja0NsYXNzOiAnZC1ub25lJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KSJdfQ==
